{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/config.js","webpack:///./src/Interceptor.js","webpack:///./src/common.js","webpack:///./src/helper.js","webpack:///./src/log.js","webpack:///./src/request.js","webpack:///./src/validation.js","webpack:///./src/EecUtils.js","webpack:///./src/wechatUtils.js","webpack:///./src/ga.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_default","debug","proxyURL","GAdebugURL","validateHit","maxLogLength","GAURL","method","headers","rest","wxRequestTimeout","enableLogger","validateParams","LoggerName","Interceptor","this","_list","use","u","list","remove","clear","fn","push","Store","GAlog","getLog","Error","loggerName","wx","document","URL","val","env","reverse","window","localStorage","setItem","JSON","stringify","setStorage","data","removeStorage","shift","length","a","b","Date","time","getStorageSync","parse","getItem","e","helper","obj","keys","map","join","msg","dest","src","merge","date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","formatNumber","toString","getTime","replace","Math","random","floor","copy","setTime","Array","len","deepClone","attr","Logger","config","log","size","add","formatTime","Launch","console","Request","option","Log","that","String","toUpperCase","removeEmptyObjKey","formData","concat","getUrl","url","transferResponse","xhr","XMLHttpRequest","responseType","onreadystatechange","readyState","status","enqueue","type","res","response","hitID","onError","onSuccess","open","send","setRequestHeader","options","request","header","timeout","success","fail","forEach","undefined","isonWechat","weRequest","webRequest","validation","v","init","requireList","regexL","x","params","re","RegExp","isString","match","objectToParams","rule","target","checkRequire","regex","checkValidateParamater","checkObjList","impressionListIndex","imp","listMapping","Map","ls","every","lst","Set","entries","set","some","isEmptyObj","constructor","eec","objectEntriesPolyfilll","ownProps","resArray","cd","cm","isArray","impressions","pcd","productScopeCD","pcm","productScopeCM","product","ilLen","ilMap","id","listIndex","k","promotions","products","promo","prod","SceneMapping","1001","1005","1006","1007","1008","1011","1012","1013","1014","1017","1019","1020","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1034","1035","1036","1037","1038","1039","1042","1043","1044","1045","1046","1047","1048","1049","1052","1053","1054","1056","1057","1058","1059","1064","1067","1068","1069","1071","1072","1073","1074","1077","1078","1079","1081","1082","1084","1089","1090","1091","1092","1095","1096","1097","1099","1102","1103","1104","1106","1107","1113","1114","1124","1125","1126","1129","1131","1146","1148","default","currentMap","currentOutput","input","current","find","item","inputRegex","outputName","wechatUtils","sMapping","onWechat","isOnwechat","SMapping","table","field","Mapping","num","mapping","getSystemInfoSync","isAndroid","system","toLowerCase","indexOf","iresPad","model","version","y","navigator","userAgent","pages","getCurrentPages","currentPage","route","urlWithArgs","substring","GA","weUtils","interceptors","filter","lobj","setLog","args","op","_preprocessArgs","getEnvURL","ua","generateUA","defaultGaData","arg","flat","optionCopy","generateUUID","cog","mh","opData","cc","cogCd","cogCm","eecobj","checkEEC","assign","transferRequest"],"mappings":"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","file":"ga.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\r\nconst _default = {\r\n  debug:false,\r\n  proxyURL:'',\r\n  GAdebugURL:\"https://www.google-analytics.com/debug/collect\",\r\n  validateHit:false,\r\n  maxLogLength:10,\r\n  GAURL:\"https://www.google-analytics.com/collect\",\r\n  method: 'POST',\r\n  headers: {\r\n      'X-Request-By': 'XMLHttpRequest',\r\n      'Content-Type':'application/x-www-form-urlencoded'\r\n  },\r\n  rest:'',\r\n  wxRequestTimeout:2000,\r\n  enableLogger:true,\r\n  validateParams:false,\r\n  LoggerName:\"gaLog\",\r\n};\r\n\r\n\r\nexport default _default\r\n","class Interceptor {\r\n  constructor() {\r\n    this._list = [];\r\n    this.use = this.u\r\n    this.list = this.l\r\n    this.remove = this.clear\r\n  }\r\n\r\n  u(fn) {\r\n    this._list.push(fn);\r\n  }\r\n\r\n  l() {\r\n    return this._list;\r\n  }\r\n  clear(){\r\n    this._list = []\r\n  }\r\n}\r\n\r\n\r\nexport default Interceptor;\r\n","class Store{\r\n  constructor(name){\r\n    this.GAlog = this.GAlog || this.getLog() || []\r\n    if(typeof name != \"string\"){\r\n      throw new Error(\"Logger Name must be string\")\r\n    }\r\n\r\n    this.loggerName = name ||  \"gaLog\"\r\n\r\n  }\r\n  env(){\r\n    if(typeof wx == \"object\"){\r\n\r\n      return \"WECHAT\"\r\n    }\r\n\r\n    if (!!document.URL){\r\n\r\n      return \"WEB\"\r\n    }\r\n  }\r\n\r\n  add(val){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog.push(val)\r\n      this.GAlog = this.GAlog.reverse()\r\n      window.localStorage.setItem(this.loggerName,JSON.stringify(this.GAlog));\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == \"WECHAT\"){\r\n      this.GAlog.push(val)\r\n      this.GAlog = this.GAlog.reverse()\r\n      wx.setStorage({key:this.loggerName,data:this.GAlog})\r\n      return this.getLog()\r\n    }\r\n\r\n  }\r\n\r\n  remove(){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog = []\r\n      window.localStorage.clear()\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == 'WECHAT'){\r\n      this.GAlog = []\r\n      wx.removeStorage({key: this.loggerName})\r\n      return this.getLog()\r\n    }\r\n    //wechat\r\n  }\r\n\r\n  shift(){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog.shift()\r\n      this.GAlog = this.GAlog.reverse()\r\n      window.localStorage.setItem(this.loggerName,JSON.stringify(this.GAlog));\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == \"WECHAT\"){\r\n      this.GAlog.shift()\r\n      this.GAlog = this.GAlog\r\n      wx.setStorage({key:this.loggerName,data:this.GAlog})\r\n      return this.getLog()\r\n    }\r\n\r\n    //wechat\r\n  }\r\n\r\n  size(){\r\n     let galog = this.getLog() || 0\r\n     return galog.length || 0\r\n    //wechat\r\n  }\r\n\r\n  sortByTime(a,b){\r\n  return new Date(a.time) - new Date(b.time)\r\n}\r\n\r\n   getLog(){\r\n     if(this.env() == \"WECHAT\"){\r\n       var t =wx.getStorageSync(this.loggerName)\r\n       return t\r\n     }\r\n     //console.log(t)\r\n\r\n\r\n\r\n     if(this.env() == \"WEB\"){\r\n       try{\r\n         return JSON.parse(window.localStorage.getItem(this.loggerName))\r\n       }catch(e){\r\n         return window.localStorage.getItem(this.loggerName)\r\n       };\r\n     }\r\n   }\r\n\r\n}\r\n\r\nexport default Store\r\n","class helpers {\r\n  constructor() {\r\n  }\r\n\r\n\r\n\r\n  objectToParams(obj){\r\nlet queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\nreturn queryString\r\n  }\r\n\r\n  Error(msg){\r\n    if(msg){\r\n      throw new Error(msg);\r\n    }\r\n  }\r\n\r\n  merge(dest, src) {\r\n  if(JSON.stringify(src) === '{}') return dest\r\n  for (let name in src) {\r\n    if (typeof src[name] == 'object') {\r\n      if (!dest[name]) {\r\n        dest[name] = {};\r\n      }\r\n\r\n      this.merge(dest[name], src[name]);\r\n    } else {\r\n      dest[name] = src[name];\r\n    }\r\n  }\r\n  return dest\r\n}\r\n\r\nformatTime(date){\r\n  const year = date.getFullYear()\r\n  const month = date.getMonth() + 1\r\n  const day = date.getDate()\r\n  const hour = date.getHours()\r\n  const minute = date.getMinutes()\r\n  const second = date.getSeconds()\r\n\r\n  return [year, month, day].map(this.formatNumber).join('/') + ' ' + [hour, minute, second].map(this.formatNumber).join(':')\r\n}\r\n\r\nformatNumber(n){\r\n  n = n.toString()\r\n  return n[1] ? n : '0' + n\r\n}\r\n\r\ngenerateUUID(){\r\n    var d = new Date().getTime();\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = (d + Math.random()*16)%16 | 0;\r\n        d = Math.floor(d/16);\r\n        return (c=='x' ? r : (r&0x7|0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n}\r\n\r\n  deepClone(obj) {\r\n    var copy;\r\n\r\n    // Handle number, boolean, string, null and undefined\r\n    if (null == obj || \"object\" != typeof obj) return obj;\r\n\r\n    // Handle Date\r\n    if (obj instanceof Date) {\r\n        copy = new Date();\r\n        copy.setTime(obj.getTime());\r\n        return copy;\r\n    }\r\n\r\n    // Handle Array\r\n    if (obj instanceof Array) {\r\n        copy = [];\r\n        for (var i = 0, len = obj.length; i < len; i++) {\r\n            copy[i] = this.deepClone(obj[i]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    // Handle Object\r\n    if (obj instanceof Object) {\r\n        copy = {};\r\n        for (var attr in obj) {\r\n            if (obj.hasOwnProperty(attr)) copy[attr] = this.deepClone(obj[attr]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\");\r\n}\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst helper = new helpers()\r\n\r\n\r\nexport default helper;\r\n","import Store from './common'\r\nimport helper from './helper'\r\n\r\nclass Logger {\r\n  constructor(config){\r\n    this.log = new Store(config.LoggerName)\r\n    //this.init()\r\n    this.maxLogLength = config.maxLogLength\r\n    this.enableLogger = config.enableLogger\r\n\r\n  }\r\n\r\n  init(){\r\n\r\n    if(this.size() == 0){\r\n\r\n\r\n    this.log.add(\r\n      {\r\n         time:helper.formatTime(new Date),\r\n         Launch:\"Logger Init\"\r\n      })\r\n  }\r\n  }\r\n\r\n    enqueue(val) {\r\n      if(!this.enableLogger){\r\n        console.log(\"debug mode paused, won't record any log right now\")\r\n        return false\r\n      }\r\n\r\n      if(this.size() < this.maxLogLength){\r\n        this.log.add({\r\n          time : helper.formatTime(new Date),\r\n          ...val,\r\n        });\r\n      }\r\n      if(this.size() >= this.maxLogLength){\r\n        this.log.shift()\r\n        this.log.add({\r\n          time:helper.formatTime(new Date),\r\n          ...val})\r\n      }\r\n      console.log(this.log)\r\n      return this.log\r\n    }\r\n\r\n    dequeue() {\r\n        let de = this.log.shift();\r\n        return de\r\n    }\r\n\r\n\r\n    isEmpty() {\r\n        return this.log.length === 0;\r\n    }\r\n\r\n    clear(){\r\n      this.log.remove()\r\n      return this.log\r\n    }\r\n\r\n    size(){\r\n      return this.log.size()\r\n    }\r\n    getlog(){\r\n      return this.log\r\n    }\r\n}\r\n\r\n\r\nexport default Logger\r\n","import Logger from './log'\r\nimport _default from './config'\r\n\r\nclass Request {\r\n  constructor(option){\r\n     this.Log = new Logger(option)\r\n  }\r\n\r\n\r\n  webRequest(option){\r\n    //let {url,method,data} = option\r\n    // object to params?\r\n      let that = this\r\n      if (String(option) !== '[object Object]') return undefined\r\n      option.method = option.method ? option.method.toUpperCase() : 'POST'\r\n      option.data =that.removeEmptyObjKey(option.data) || {}\r\n      var formData = []\r\n      for (var key in option.data) {\r\n        formData.push(''.concat(key, '=', option.data[key]))\r\n      }\r\n      option.data = formData.join('&')\r\n\r\n      if (option.method === 'GET') {\r\n        option.getUrl= option.url + \"?\" + option.data\r\n      }\r\n      let {transferResponse} = option\r\n\r\n      //console.log(option)\r\n      var xhr = new XMLHttpRequest()\r\n      xhr.responseType = option.responseType || 'json'\r\n      xhr.onreadystatechange = function () {\r\n        if (xhr.readyState === 4) {\r\n          if (xhr.status === 200) {\r\n            if(transferResponse)\r\n            {\r\n              //console.log(xhr.response)\r\n              that.Log.enqueue({\r\n\t\t\t\t         type:\"success\",\r\n                url:option.url?option.url:option.getUrl,\r\n                data:option.data,\r\n                res:option.validateHit ? transferResponse(xhr.response): xhr.status,\r\n                hitID:option.hitID,\r\n                //transferResponse(xhr.response)\r\n              })\r\n              if(!!option.onSuccess){\r\n                option.onSuccess(option)\r\n              }\r\n\r\n                //delete option.transferRespons\r\n                //transferResponse = (res)=> res\r\n\r\n\r\n            }else{\r\n              that.Log.enqueue({\r\n\t\t\t        \ttype:\"success\",\r\n                url:option.url?option.url:option.getUrl,\r\n                data:option.data,\r\n                res:option.validateHit ? xhr.response : xhr.status,\r\n                hitID:option.hitID,\r\n              })\r\n              if(!!option.onSuccess){\r\n                option.onSuccess(option)\r\n              }\r\n\r\n            }\r\n          } else {\r\n              //this.fail()\r\n              that.Log.enqueue({\r\n                type:\"error\",\r\n                data:option.data,\r\n                url:option.url?option.url:option.getUrl,\r\n                res:option.validateHit ? xhr.response : \"Error\",\r\n                hitID:option.hitID,\r\n                //data:option.data,\r\n                //transferResponse(xhr.response)\r\n              })\r\n              if(!!option.onError){\r\n              option.onError(option)\r\n              }\r\n\r\n              return \"Request Fail\"\r\n\r\n          }\r\n        }\r\n      }\r\n      if(option.method == \"GET\"){\r\n        xhr.open(option.method, option.getUrl, true)\r\n        xhr.send()\r\n      }\r\n\r\n      if (option.method === 'POST') {\r\n        xhr.open(option.method, option.url, true)\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\r\n        xhr.send(option.data)\r\n      }\r\n      //console.loh(t)\r\n    }\r\n\r\n\r\nweRequest(options){\r\n  let that = this\r\n   let {transferResponse} = options\r\n   options.data = this.removeEmptyObjKey(options.data)\r\n   wx.request({\r\n     url:options.url,\r\n     method:options.method,\r\n     data:options.data,\r\n     header:options.headers,\r\n     timeout:options.wxRequestTimeout,\r\n     success(res){\r\n       //console.log(res)\r\n       if(transferResponse){\r\n       that.Log.enqueue({\r\n\t\t  type:\"success\",\r\n         url:options.url?options.url:options.getUrl,\r\n         data:options.data,\r\n         res:options.transferResponse(res),\r\n         hitID:options.hitID,\r\n       })\r\n     }else{\r\n      that.Log.enqueue({\r\n\t\t  type:\"success\",\r\n         url:options.url?options.url:options.getUrl,\r\n         data:options.data,\r\n         res:res,\r\n         hitID:options.hitID,\r\n       })\r\n     }\r\n       if(!!options.onSuccess){\r\n         options.onSuccess(options,res)\r\n       }\r\n     },\r\n     fail(res){\r\n       //console.log(res)\r\n       if(transferResponse){\r\n       that.Log.enqueue({\r\n\t\t   type:\"error\",\r\n         url:options.url?options.url:options.getUrl,\r\n         data:options.data,\r\n         res:options.transferResponse(res),\r\n         hitID:options.hitID,\r\n       })\r\n     }else{\r\n       that.Log.enqueue({\r\n         url:options.url?options.url:options.getUrl,\r\n         data:options.data,\r\n         res:res,\r\n         hitID:options.hitID,\r\n       })\r\n     }\r\n       if(!!options.onError){\r\n         options.onError(options,res)\r\n       }\r\n\r\n     }\r\n   })\r\n}\r\nisonWechat(){\r\n  return typeof wx == 'object'? true : false\r\n}\r\n\r\nremoveEmptyObjKey(obj){\r\n    Object.keys(obj).forEach(key => {\r\n     if (obj[key] === undefined || !obj[key]) {\r\n      delete obj[key];\r\n     }\r\n    });\r\n     return obj\r\n   }\r\n\r\nsend(options){\r\n\r\n  if(this.isonWechat()){\r\n    return this.weRequest(options)\r\n  }\r\n  return this.webRequest(options)\r\n\r\n}\r\n\r\n}\r\n\r\nexport default Request\r\n","\r\nclass validation{\r\n  constructor(){\r\n   this.v = this.init()\r\n   this.requireList = ['tid','v','cid']\r\n   //this.anyList = [['dp','dl','dh']]\r\n   this.regexL = {\r\n     \"tid\":\"UA-[0-9]*-[0-9]*\"\r\n   }\r\n\r\n  }\r\n\r\n  add(fn){\r\n    this.v.push(fn)\r\n  }\r\n\r\n  use(obj){\r\n    var that = this\r\n    for(let fn of this.v){\r\n      obj = fn.call(that, obj)\r\n    }\r\n    return obj\r\n  }\r\n\r\n  checkRequire(obj){\r\n    var that = this\r\n    for(let x of this.requireList){\r\n        if(!obj.hasOwnProperty(x)){\r\n          throw new Error(`${x} is required`)\r\n        }\r\n    }\r\n    return obj\r\n\r\n  }\r\n\r\n\r\n  addRequirelist(params){\r\n     return this.requireList.push(params)\r\n  }\r\n\r\n  /*addAnyList(params){\r\n    return this.anyList.push(params)\r\n  }*/\r\n\r\n  addRegexList(obj){\r\n    this.regexL =  {\r\n      ...this.regexL,\r\n      ...obj\r\n    }\r\n    return this.regexL\r\n  }\r\n\r\n\r\n  regex(obj){\r\n    let that = this\r\n    for(let x in this.regexL){\r\n      if(!obj.hasOwnProperty(x)){\r\n        throw new Error(`No ${that.x} on object`)\r\n      }\r\n      let re = new RegExp(this.regexL[x],'ig')\r\n      if(this.isString(x)){\r\n      if(!String(obj[x]).match(re)){\r\n        throw new Error(`${x} do not match ${that.regexL[x]}`)\r\n      }\r\n    }\r\n  }\r\n    return obj\r\n\r\n  }\r\n\r\n\r\n  length(obj){\r\n\r\n    function objectToParams(obj){\r\n  let queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\n  return queryString\r\n    }\r\n\r\n    let objString = this.objectToParams(obj)\r\n    if(objString.length > 8012){\r\n      throw new Error(\"Hit was too long, hit length must under 8012\")\r\n    }\r\n    return obj\r\n  }\r\n\r\n  /*anyone(obj){\r\n    var that = this\r\n    for(let l of this.anyList){\r\n      if(Object.keys(obj).filter((val)=>l.includes(val)).length == 0){\r\n        throw new Error(`must contains anyone of ${JSON.stringify(l)}`)\r\n      }\r\n    }\r\n\r\n    return obj\r\n  }*/\r\n\r\n  pa(obj,rule,target){\r\n\r\n  }\r\n\r\n  checkValidateParamater(obj){\r\n\r\n    for(let x in obj){\r\n      //if(typeof x == 'object'{continue}\r\n      if(this.isString(x)){\r\n      if(String(obj[x]).match(/@?&=/i)){\r\n        throw new Error(\"Can not contains '@?&=' in the params\");\r\n      }\r\n    }\r\n  }\r\n    return obj\r\n  }\r\n\r\n  objectToParams(obj){\r\nlet queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\nreturn queryString\r\n  }\r\n\r\n  init(obj){\r\n    let t = []\r\n    t.push(this.checkRequire)\r\n    t.push(this.regex)\r\n    //t.push(this.anyone)\r\n    t.push(this.checkValidateParamater)\r\n    t.push(this.length)\r\n    return t\r\n  }\r\n\r\n  resetTodefault(){\r\n    this.requireList = ['tid','v']\r\n    //this.anyList = [['dp','dl','dh']]\r\n    this.regexL = {\r\n      \"tid\":\"UA-[0-9]*-[0-9]*\"\r\n    }\r\n  }\r\n\r\n  isString(s){\r\n    if (typeof s === 'string' || s instanceof String){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n\r\n}\r\n\r\n//check hit payload lengtg\r\n//check required paramters\r\n//check if there is any unvalid paramters ? &\r\n//check if mobile or web\r\n//check EEC object\r\n//check pa for EEC\r\n\r\n\r\nexport default validation\r\n","\r\n\r\n  import _default from './config';\r\n  function checkObjList(obj){\r\n    if( typeof obj !== 'object'){\r\n      return \"Error, this is not a object\"\r\n    }\r\n    if(obj.hasOwnProperty('list')){\r\n      return true\r\n    }\r\n      return false\r\n  }\r\n\r\n\r\n  function impressionListIndex(imp){\r\n\r\n      let listMapping = new Map()\r\n      let ls = []\r\n      if(imp.every(checkObjList)){\r\n      for (let x of imp){\r\n        if(x.hasOwnProperty('list')){\r\n          ls.push(x['list'])\r\n        }\r\n      }\r\n\r\n      let lst = [...new Set(ls)]\r\n      //console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n        listMapping.set(\"type\",\"every\")\r\n      return listMapping\r\n\r\n      }\r\n\r\n      if(imp.some(checkObjList)){\r\n\r\n      for (let [i,x] of imp.entries()){\r\n        if(x.hasOwnProperty('list')){\r\n          ls.push(x['list'])\r\n        }\r\n        ls.push(\"_not_set_\")\r\n      }\r\n      let lst = [...new Set(ls)]\r\n      //console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n      listMapping.set(\"type\",\"some\")\r\n      //console.log(listMapping)\r\n      return listMapping\r\n      }\r\n\r\n      if(ls.length == imp.length){\r\n        listMapping.set('len',lst.length)\r\n      }\r\n      //console.log(ls)\r\n      let lst = [...new Set(ls)]\r\n      //console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n      listMapping.set(\"type\",\"none\")\r\n      return listMapping\r\n    }\r\n\r\n\r\n   function isEmptyObj(obj){\r\n     if(Object.keys(obj).length === 0 && obj.constructor === Object){\r\n      return true\r\n     }\r\n     return false\r\n\r\n   }\r\n\r\n  class EEC{\r\n   constructor(){\r\n     this.objectEntriesPolyfilll()\r\n   }\r\n\r\n   objectEntriesPolyfilll(){\r\n     if (!Object.entries)\r\n   Object.entries = function( obj ){\r\n     var ownProps = Object.keys( obj ),\r\n         i = ownProps.length,\r\n         resArray = new Array(i); // preallocate the Array\r\n     while (i--)\r\n       resArray[i] = [ownProps[i], obj[ownProps[i]]];\r\n\r\n     return resArray;\r\n   };\r\n   }\r\n\r\n  impressions(obj,cd,cm){\r\n      if(!obj.hasOwnProperty(\"impressions\")) return {}\r\n      if(!Array.isArray(obj.impressions)) throw new Error(\"impressions must be a object array\");\r\n      let pcd = {\r\n        ..._default.productScopeCD,\r\n        ...cd\r\n      }\r\n\r\n      let pcm = {\r\n        ..._default.productScopeCM,\r\n        ...cm\r\n      }\r\n      let product = {}\r\n        let ilLen = impressionListIndex(obj.impressions).get(\"type\")\r\n        let ilMap = impressionListIndex(obj.impressions)\r\n        ilMap.delete(\"type\")\r\n        //has list on the object\r\n        if(ilLen == \"every\"){\r\n          for (let [id,ls] of ilMap.entries() ){\r\n            product[`il${ls}nm`]=id\r\n          }\r\n\r\n            for (let [i,v] of obj.impressions.entries()){\r\n\r\n              let listIndex = ilMap.get(v.list) || i+1\r\n              if(v.hasOwnProperty('name')){\r\n                product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n              }\r\n\r\n              if(v.hasOwnProperty('id')){\r\n                product[`il${listIndex}pi${i+1}id`] = v['id']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('brand')){\r\n                product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('variant')){\r\n                product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n              }\r\n\r\n              if(v.hasOwnProperty('price')){\r\n                product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n              }\r\n\r\n              if(v.hasOwnProperty('position')){\r\n                product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n              }\r\n              if(!isEmptyObj(pcd)){\r\n                for(let k in pcd){\r\n                  if(!!k && pcd[k] ){\r\n                    product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n                  }\r\n                }\r\n              }\r\n\r\n              if(!isEmptyObj(pcm)){\r\n                for(let k in pcm){\r\n                  if(!!k && pcm[k] ){\r\n                    product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            return product\r\n\r\n        }else if(ilLen == \"some\"){\r\n          for (let [id,ls] of ilMap.entries() ){\r\n            if(typeof id == \"string\"){\r\n              product[`il${ls}nm`]=id\r\n            }\r\n\r\n            for (let [i,v] of obj.impressions.entries()){\r\n              let listIndex = ilMap.get(v.list) || ilMap.get(\"_not_set_\")\r\n              if(v.hasOwnProperty('name')){\r\n                product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n              }\r\n\r\n              if(v.hasOwnProperty('id')){\r\n                product[`il${listIndex}pi${i+1}id`] = v['id']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('brand')){\r\n                product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('variant')){\r\n                product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n              }\r\n\r\n              if(v.hasOwnProperty('price')){\r\n                product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n              }\r\n\r\n              if(v.hasOwnProperty('position')){\r\n                product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n              }\r\n\r\n              if(!isEmptyObj(pcd)){\r\n                for(let k in pcd){\r\n                  if(!!k && pcd[k] ){\r\n                    product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n                  }\r\n                }\r\n              }\r\n\r\n              if(!isEmptyObj(pcm)){\r\n                for(let k in pcm){\r\n                  if(!!k && pcm[k] ){\r\n                    product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n\r\n            }\r\n\r\n        //console.log(product)\r\n        return product\r\n      }else{\r\n          // no list on the object\r\n          for (let [i,v] of obj.impressions.entries()){\r\n          let listIndex =  1\r\n          if(v.hasOwnProperty('name')){\r\n            product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n          }\r\n\r\n          if(v.hasOwnProperty('id')){\r\n            product[`il${listIndex}pi${i+1}id`] = v['id']\r\n          }\r\n\r\n          if(v.hasOwnProperty('category')){\r\n            product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n          }\r\n\r\n          if(v.hasOwnProperty('brand')){\r\n            product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n          }\r\n\r\n          if(v.hasOwnProperty('category')){\r\n            product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n          }\r\n\r\n          if(v.hasOwnProperty('variant')){\r\n            product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n          }\r\n\r\n          if(v.hasOwnProperty('price')){\r\n            product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n          }\r\n\r\n          if(v.hasOwnProperty('position')){\r\n            product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n          }\r\n\r\n          if(!isEmptyObj(pcd)){\r\n            for(let k in pcd){\r\n              if(!!k && pcd[k] ){\r\n                product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n              }\r\n            }\r\n          }\r\n\r\n          if(!isEmptyObj(pcm)){\r\n            for(let k in pcm){\r\n              if(!!k && pcm[k] ){\r\n                product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n              }\r\n            }\r\n          }\r\n        }\r\n        }\r\n\r\n         return product\r\n\r\n    }\r\n\r\n    /*var t = {\r\n      \"promotions\": [{\r\n  \"id\": \"bts\",\r\n  \"name\": \"Back To School\",\r\n  \"creative\": \"HOME banner\",\r\n  \"position\": \"right sidebar\"\r\n}]\r\n}*/\r\n\r\n  promotions(obj){\r\n\r\n      if(!obj.hasOwnProperty(\"promotions\") ) return {};\r\n      if(!Array.isArray(obj.promotions)) throw new Error(\"promotion must be a object array\");\r\n\r\n      let product= {}\r\n      ///if(obj.promotions.hasOwnProperty('action')){\r\n      //  product['promoa'] = obj.promotions.action\r\n      //}\r\n\r\n\r\n      for (let [i,v] of obj.promotions.entries()){\r\n        if(v.hasOwnProperty(\"id\")){\r\n          product[`promo${i+1}id`] = v['id']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"name\")){\r\n          product[`promo${i+1}nm`] = v['name']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"creative\")){\r\n          product[`promo${i+1}cr`] = v['creative']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"position\")){\r\n          product[`promo${i+1}ps`] = v['position']\r\n        }\r\n\r\n      }\r\n      return product\r\n\r\n\r\n    }\r\n\r\n    /*promotions(t)\r\n\r\n    var t = {\"products\": [{\r\n        \"id\": \"bc823\",\r\n        \"name\": \"Fuelworks T-Shirt\",\r\n        \"price\": \"92.00\",\r\n        \"brand\": \"Fuelworks\",\r\n        \"category\": \"T-Shirts\",\r\n        \"position\": \"4\"\r\n      }]\r\n    }*/\r\n\r\n    products(obj,cd,cm){\r\n      if(!obj.hasOwnProperty(\"products\") ) return {};\r\n    if(!Array.isArray(obj.products)) throw new Error(\"products must be a object array\");\r\n    let pcd = {\r\n      ..._default.productScopeCD,\r\n      ...cd\r\n    }\r\n\r\n    let pcm = {\r\n      ..._default.productScopeCM,\r\n      ...cm\r\n    }\r\n    let product = {}\r\n    for(let[i,v] of obj.products.entries()){\r\n      if(v.hasOwnProperty('id')){\r\n        product[`pr${i+1}id`] = v['id']\r\n      }\r\n\r\n      if(v.hasOwnProperty('name')){\r\n        product[`pr${i+1}nm`] = v['name']\r\n      }\r\n\r\n      if(v.hasOwnProperty('brand')){\r\n        product[`pr${i+1}br`] = v['brand']\r\n      }\r\n\r\n      if(v.hasOwnProperty('price')){\r\n        product[`pr${i+1}pr`] = v['price']\r\n      }\r\n\r\n      if(v.hasOwnProperty('category')){\r\n        product[`pr${i+1}ca`] = v['category']\r\n      }\r\n\r\n      if(v.hasOwnProperty('variant')){\r\n        product[`pr${i+1}va`] = v['variant']\r\n      }\r\n\r\n      if(v.hasOwnProperty('quantity')){\r\n        product[`pr${i+1}qt`] = v['quantity']\r\n      }\r\n\r\n      if(v.hasOwnProperty('coupon')){\r\n        product[`pr${i+1}cc`] = v['coupon']\r\n      }\r\n\r\n      if(v.hasOwnProperty('position')){\r\n        product[`pr${i+1}ps`] = v['position']\r\n      }\r\n\r\n      if(!isEmptyObj(pcd)){\r\n        for(let k in pcd){\r\n          if(!!k && pcd[k] ){\r\n            product[`pr${i+1}cd${k}`] = pcd[k]\r\n          }\r\n        }\r\n      }\r\n\r\n      if(!isEmptyObj(pcm)){\r\n        for(let k in pcm){\r\n          if(!!k && pcm[k] ){\r\n            product[`pr${i+1}cm${k}`] = pcm[k]\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n    return product\r\n\r\n\r\n    }\r\n\r\n\r\n    checkEEC(obj,cd,cm){\r\n\r\n      if(obj.hasOwnProperty(\"impressions\")){\r\n        var imp = this.impressions(obj,cd,cm)\r\n      }\r\n\r\n\r\n      if(obj.hasOwnProperty(\"promotions\")){\r\n        var promo = this.promotions(obj,cd,cm)\r\n      }\r\n\r\n      if(obj.hasOwnProperty(\"products\")){\r\n        var  prod = this.products(obj,cd,cm)\r\n      }\r\n\r\n      let eecObj = {\r\n        ...imp,\r\n        ...promo,\r\n        ...prod\r\n      }\r\n      return eecObj\r\n    }\r\n\r\n}\r\n\r\nconst eec = new EEC()\r\nexport default eec\r\n","\r\nconst SceneMapping = {\r\n    1001: \"发现栏小程序主入口\",\r\n    1005: \"顶部搜索框的搜索结果页\",\r\n    1006: \"发现栏小程序主入口搜索框的搜索结果页\",\r\n    1007: \"单人聊天会话中的小程序消息卡片\",\r\n    1008: \"群聊会话中的小程序消息卡片\",\r\n    1011: \"扫描二维码\",\r\n    1012: \"长按图片识别二维码\",\r\n    1013: \"手机相册选取二维码\",\r\n    1014: \"小程序模版消息\",\r\n    1017: \"前往体验版的入口页\",\r\n    1019: \"微信钱包\",\r\n    1020: \"公众号profile页相关小程序列表\",\r\n    1022: \"聊天顶部置顶小程序入口\",\r\n    1023: \"安卓系统桌面图标\",\r\n    1024: \"小程序profile页\",\r\n    1025: \"扫描一维码\",\r\n    1026: \"附近小程序列表\",\r\n    1027: \"顶部搜索框搜索结果页“使用过的小程序”列表\",\r\n    1028: \"我的卡包\",\r\n    1029: \"卡券详情页\",\r\n    1030: \"自动化测试下打开小程序\",\r\n    1031: \"长按图片识别一维码\",\r\n    1032: \"手机相册选取一维码\",\r\n    1034: \"微信支付完成页\",\r\n    1035: \"公众号自定义菜单\",\r\n    1036: \"App 分享消息卡片\",\r\n    1037: \"小程序打开小程序\",\r\n    1038: \"从另一个小程序返回\",\r\n    1039: \"摇电视\",\r\n    1042: \"添加好友搜索框的搜索结果页\",\r\n    1043: \"公众号模板消息\",\r\n    1044: \"带shareTicket的小程序消息卡片\",\r\n    1045: \"朋友圈广告\",\r\n    1046: \"朋友圈广告详情页\",\r\n    1047: \"扫描小程序码\",\r\n    1048: \"长按图片识别小程序码\",\r\n    1049: \"手机相册选取小程序码\",\r\n    1052: \"卡券的适用门店列表\",\r\n    1053: \"搜一搜的结果页\",\r\n    1054: \"顶部搜索框小程序快捷入口\",\r\n    1056: \"音乐播放器菜单\",\r\n    1057: \"钱包中的银行卡详情页\",\r\n    1058: \"公众号文章\",\r\n    1059: \"体验版小程序绑定邀请页\",\r\n    1064: \"微信连Wifi状态栏\",\r\n    1067: \"公众号文章广告\",\r\n    1068: \"附近小程序列表广告\",\r\n    1069: \"移动应用\",\r\n    1071: \"钱包中的银行卡列表页\",\r\n    1072: \"二维码收款页面\",\r\n    1073: \"客服消息列表下发的小程序消息卡片\",\r\n    1074: \"公众号会话下发的小程序消息卡片\",\r\n    1077: \"摇周边\",\r\n    1078: \"连Wi-Fi成功页\",\r\n    1079: \"微信游戏中心\",\r\n    1081: \"客服消息下发的文字链\",\r\n    1082: \"公众号会话下发的文字链\",\r\n    1084: \"朋友圈广告原生页\",\r\n    1089: \"微信聊天主界面下拉\",\r\n    1090: \"长按小程序右上角菜单唤出最近使用历史\",\r\n    1091: \"公众号文章商品卡片\",\r\n    1092: \"城市服务入口\",\r\n    1095: \"小程序广告组件\",\r\n    1096: \"聊天记录\",\r\n    1097: \"微信支付签约页\",\r\n    1099: \"页面内嵌插件\",\r\n    1102: \"公众号 profile 页服务预览\",\r\n    1103:\"发现栏小程序主入口，「我的小程序」列表（基础库2.2.4版本起废弃）\",\r\n    1104: \"微信聊天主界面下拉，「我的小程序」栏（基础库2.2.4版本起废弃）\",\r\n    1106:\"聊天主界面下拉，从顶部搜索结果页，打开小程序\",\r\n    1107: \"订阅消息，打开小程序\",\r\n    1113:\"安卓手机负一屏，打开小程序（三星）\",\r\n    1114:\"安卓手机侧边栏，打开小程序（三星）\",\r\n    1124:\"扫“一物一码”打开小程序\",\r\n    1125:\"长按图片识别“一物一码”\",\r\n    1126:\"扫描手机相册中选取的“一物一码”\",\r\n    1129:\"微信爬虫访问 详情\",\r\n    1131:\"浮窗打开小程序\",\r\n    1146:\"地理位置信息打开出行类小程序\",\r\n    1148:\"1148\",\r\n    default:\"unknow scene value\"\r\n  };\r\n  /*\r\n var m =[{\r\n   inputRegex:\".*\",\r\n   outputName:\"'test'\"\r\n },\r\n {\r\n default:\"others\"\r\n}\r\n]*/\r\n\r\n\r\n\r\n  class Mapping {\r\n      constructor() {\r\n          this.currentMap = {}\r\n          this.currentOutput = \"\"\r\n      }\r\n\r\n      getMap() {\r\n          return this.map\r\n      }\r\n      Mapping(map,input){\r\n        const current = map.find(item => input.match(new RegExp(item.inputRegex,\"i\"))) || map.find(n=>n.default)|| {}\r\n        this.currentMap = current\r\n        this.currentOutput =  current.outputName || current.default\r\n        return current.outputName || input\r\n      }\r\n\r\n      getOutput() {\r\n          return this.currentOutput\r\n      }\r\n  }\r\n\r\n  var m = new Mapping()\r\n\r\n\r\nclass wechatUtils{\r\n  construct(sMapping){\r\n    this.onWechat = this.isOnwechat()\r\n    this.SMapping = sMapping || SceneMapping\r\n  }\r\n\r\n  map(table,field){\r\n    return m.Mapping(table,field)\r\n  }\r\n\r\n  isOnwechat(){\r\n    if(typeof wx == 'object'){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  mappingSceneToCN(num, mapping){\r\n    let m = mapping || this.SMapping\r\n    if(this.onWechat){\r\n      return m[num] || m['default']\r\n    }\r\n    return ''\r\n  }\r\n\r\n  generateUA(){\r\n    if(typeof wx == 'object'){\r\n    let res = wx.getSystemInfoSync();\r\n    let isAndroid = res.system.toLowerCase().indexOf('android') > -1;\r\n    let iresPad = !isAndroid && res.model.toLowerCase().indexOf('iphone') == -1;\r\n      if (isAndroid) {\r\n        return \"Mozilla/5.0 (Linux; U; \" + res.system + \"; \" + res.model + \" Build/000000) AppleWebKit/537.36 (KHTML, like Gecko)Verreson/4.0 Chrome/49.0.0.0 Mobile Safari/537.36 MicroMessenger/\" + res.version;\r\n      } else if (!iresPad) {\r\n\r\n    let v = res.system.replace(/^.*?([0-9.]+).*?$/, function (x, y) { return y; }).replace(/\\./g, '_');\r\n      return \"Mozilla/5.0 (iPhone; CPU iPhone OS \" + v + \" like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92 MicroMessenger/\" + res.version;\r\n    } else {\r\n      let v = res.system.replace(/^.*?([0-9.]+).*?$/, function (x, y) { return y; }).replace(/\\./g, '_');\r\n      return \"Mozilla/5.0 (iPad; CPU OS \" + v + \" like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/10A406 MicroMessenger/\" + res.version;\r\n        }\r\n    }\r\n    if(typeof navigator == 'object'){\r\n      return navigator.userAgent\r\n    }\r\n    return ''\r\n  }\r\n\r\n  getCurrentPageUrlWithArgs() {\r\n  var pages = getCurrentPages()\r\n  var currentPage = pages[pages.length - 1]\r\n  var url = currentPage.route\r\n  var options = currentPage.options\r\n\r\n  //拼接url的参数\r\n  var urlWithArgs = url + '?'\r\n  for (var key in options) {\r\n    var value = options[key]\r\n    urlWithArgs += key + '=' + value + '&'\r\n  }\r\n  urlWithArgs = urlWithArgs.substring(0, urlWithArgs.length - 1)\r\n\r\n  return urlWithArgs\r\n}\r\n\r\n getCurrentPageUrl() {\r\n  var pages = getCurrentPages()\r\n  var currentPage = pages[pages.length - 1]\r\n  var url = currentPage.route\r\n  return url\r\n}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default wechatUtils\r\n","import _default from './config';\r\nimport Interceptor from './Interceptor';\r\nimport Request from './request';\r\nimport schema from './validation'\r\nimport helper from './helper'\r\nimport Store from './common'\r\nimport eec from './EecUtils.js'\r\nimport wechatUtils from './wechatUtils'\r\nimport validation from './validation.js'\r\nclass GA{\r\n  constructor(options = {} ){\r\n    this.weUtils = new wechatUtils()\r\n    this.default = this.create(options)\r\n   this.interceptors = {\r\n    request: new Interceptor(),\r\n  //response: new Interceptor(),\r\n}\r\n\r\n    this.validation = new validation()\r\n    this.res = new Request(this.default)\r\n    this.log = this.getLog()\r\n  }\r\n\r\n  getLog(){\r\n    if( typeof wx == \"object\"){\r\n      let t =wx.getStorageSync(this.default.LoggerName)\r\n      return t\r\n    }\r\n    if(!!document.URL){\r\n      try{\r\n        return JSON.parse(window.localStorage.getItem(this.default.LoggerName))\r\n      }catch(e){\r\n        return window.localStorage.getItem(this.default.LoggerName)\r\n      };\r\n    }\r\n  }\r\n\r\n  getLogByHitId(id){\r\n    let lobj = this.log.filter(n => n['hitID'] == id)\r\n    return lobj || undefined\r\n  }\r\n\r\n  removeLogByHitId(id){\r\n    let lobj = this.log.filter(n => n['hitID'] != id)\r\n    this.setLog(lobj)\r\n    return lobj\r\n  }\r\n\r\n\r\n  setLog(log){\r\n    if( typeof wx == \"object\"){\r\n      let t =wx.setStorage({key:this.default.LoggerName,data:log})\r\n      return t\r\n    }\r\n\r\n    if(!!document.URL){\r\n      try{\r\n        return  window.localStorage.setItem(this.default.LoggerName,JSON.stringify(log));\r\n      }catch(e){\r\n        console.log(e)\r\n      };\r\n\r\n    }\r\n\r\n  }\r\n\r\n  get(...args){\r\n   let op = this._preprocessArgs(\"GET\",args)\r\n   if(!op){\r\n\r\n   }\r\n   return this.request(op)\r\n  }\r\n\r\n  post(...args) {\r\n    let op = this._preprocessArgs('POST', args);\r\n    if (!op) {\r\n      return op\r\n    }\r\n    return this.request(op)\r\n  }\r\n\r\n\r\n  create(options = {}){\r\n\r\n    if(JSON.stringify(options) === '{}') throw new Error(\"Error : config could not empty!\")\r\n    let config = {\r\n    ...JSON.parse(JSON.stringify(_default)),\r\n    ...options\r\n  };\r\n  config.url = this.getEnvURL(config)\r\n  if(typeof wx == \"object\"){\r\n    config.data.ua = this.weUtils.generateUA()\r\n  }\r\n  helper.merge(config.data,config.defaultGaData)\r\n\r\n    return config;\r\n  }\r\n\r\n  _preprocessArgs(method, ...args) {\r\n\r\n\r\n\r\n  let options;\r\n  let arg = args.flat()\r\n  if(arg.length == 0){\r\n    options ={\r\n      method,\r\n      url:this.default.url,\r\n    }\r\n  }\r\n  if(typeof arg[0] == \"object\"){\r\n    options = {\r\n      method,\r\n      url:this.default.url,\r\n    data:arg[0]}\r\n  }\r\n\r\n  return options;\r\n}\r\n\r\n\r\ngetEnvURL(config){\r\n  if(!!config.proxyURL){\r\n    return config.proxyURL\r\n  }\r\n\r\n  if(config.debug){\r\n    return config.GAURL\r\n  }\r\n\r\n  if(config.debug && config.validateHit){\r\n    return config.GAdebugURL\r\n  }\r\n\r\n  if(!config.debug && !config.proxyURL){\r\n    throw new Error(\"if you are on the prod env, then Proxy URL require\")\r\n  }\r\n}\r\n\r\nrequest(options){\r\n\r\n  const optionCopy = helper.deepClone(options)\r\n\r\n  options.hitID = helper.generateUUID()\r\n  // 合并\r\n  let cog = options\r\n  const mh = optionCopy.method\r\n  const opData = optionCopy.data\r\n\r\n  cog= helper.merge(cog,this.default)\r\n  //helper.merge(cog,options)\r\n  cog.method = mh\r\n  cog.data = helper.merge(cog.data,opData)\r\n\r\n  var cc = helper.deepClone(cog)\r\n  if(cc.data.hasOwnProperty(\"productScopeCD\")){\r\n    var cogCd = cc.data.productScopeCD || {}\r\n    delete cc.data.productScopeCD\r\n  }\r\n\r\n    if(cog.data.hasOwnProperty(\"productScopeCM\")){\r\n      var cogCm = cc.data.productScopeCM || {}\r\n      delete cc.data.productScopeCM\r\n    }\r\n  let eecobj = eec.checkEEC(cc.data,cogCd,cogCm)\r\n  cc.data = Object.assign(cc.data,eecobj)\r\n  if(cc.data.hasOwnProperty(\"products\")){\r\n    delete cc.data.products\r\n  }\r\n\r\n  if(cc.data.hasOwnProperty(\"promotions\")){\r\n    delete cc.data.promotions\r\n  }\r\n\r\n  if(cc.data.hasOwnProperty(\"impressions\")){\r\n    delete cc.data.impressions\r\n  }\r\n\r\n   if(cc.validateParams){\r\n     this.validation.use(cc.data)\r\n   }\r\n  let {transferRequest} = cc\r\n\r\n  if(transferRequest) cc = transferRequest(cc)\r\n    //delete cog.transferRequest\r\n    //delete this.default.transferRequest\r\n    //transferRequest = (cog) => cog;\r\n\r\n  let list = this.interceptors.request.list();\r\n  list.forEach(fn => {\r\n  cc = fn(cc);\r\n});\r\n\r\n  return this.res.send(cc)\r\n}\r\n\r\n\r\n}\r\n\r\nexport default GA\r\n","import GA from './ga'\r\n\r\n/*\r\nlet UA=()=> \"UA-71412438-1\"\r\n\r\nlet config = {\r\n  transferRequest(config){\r\n    console.log('do something before sending the hit')\r\n    //config.data.dp = \"/test\"\r\n    return config\r\n  },\r\n  debug:true,\r\n  data:{  //common request payload\r\n    v:1,\r\n    cid:1234556,\r\n    tid:UA(),\r\n    dp:\"placeholder\",\r\n    ds:\"wechat\",\r\n    cd1:\"custom dimension1\",\r\n    pal:'search result'\r\n  },\r\n  transferResponse(res){\r\n    console.log(\"do something for the response\")\r\n    return res\r\n  },\r\n  validateHit:false, // will send to the vvalidation endpoint(optional)\r\n  //proxyURL:\"YOUR_PROXY_URL\"\r\n  onSuccess(config){\r\n    console.log(\"success\") //your custom success function (options)\r\n  },\r\n  onError(config){\r\n    console.log(\"Error\")\r\n  },\r\n  //maxLogLength:10,\r\n  enableLogger:true,\r\n  LoggerName:\"we\"\r\n}\r\nvar t = [{\r\n     inputRegex:\"/wechat\",\r\n     outputName:\"/map\"\r\n}]\r\nlet G = new GA(config)\r\n//window.GA= GA\r\nG.interceptors.request.use(function(config) { // push a handler function before send request\r\n  config.data.dp  = G.weUtils.map(t, config.data.dp) // process data before send to GA\r\n  return config;\r\n});\r\n\r\nG.post({\r\n  dp:\"/wechat\",\r\n  t:'event',\r\n  ec:\"test\",\r\n  ea:\"wechatSDK\",\r\n  pa:\"detail\",\r\n  impressions:[{\r\n      \"id\": \"b55da\",\r\n      \"name\": \"Flexigen T-Shirt\",\r\n      \"price\": \"16.00\",\r\n      \"brand\": \"Flexigen\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": 0,\r\n\t  \"list\": \"top10\"\r\n    },\r\n    {\r\n      \"id\": \"f6be8\",\r\n      \"name\": \"Comverges T-Shirt\",\r\n      \"price\": \"33.00\",\r\n      \"brand\": \"Comverges\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": 1,\r\n\t  \"list\": \"top10\"\r\n  }],\r\n\r\n  \"products\": [\r\n    {\r\n      \"id\": \"bc823\",\r\n      \"name\": \"Fuelworks T-Shirt\",\r\n      \"price\": \"92.00\",\r\n      \"brand\": \"Fuelworks\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": \"4\"\r\n    },\r\n\r\n    {\r\n      \"id\": \"bc843\",\r\n      \"name\": \" T-Shirt\",\r\n      \"price\": \"92.00\",\r\n      \"brand\": \"Fuelworks\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": \"4\"\r\n    },\r\n  ],\r\n    \"promotions\": [{\r\n  \"id\": \"bts\",\r\n  \"name\": \"Back To School\",\r\n  \"creative\": \"HOME banner\",\r\n  \"position\": \"right sidebar\"\r\n}],\r\nproductScopeCD:{\r\n  '3':'cd3',\r\n  '6' : \"cd6\"\r\n},\r\n\r\nproductScopeCM:{\r\n  '4':100,\r\n}\r\n})\r\n*/\r\n\r\n//G.post({\r\n\t//dp:\"test\"\r\n//})\r\n\r\n//G.post({\r\n\t//dp:\"1\"\r\n//})\r\n\r\n\r\nexport default GA\r\n"],"sourceRoot":""}