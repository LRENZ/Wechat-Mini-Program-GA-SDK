{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/EecUtils.js","webpack:///./src/Interceptor.js","webpack:///./src/common.js","webpack:///./src/config.js","webpack:///./src/helper.js","webpack:///./src/index.js","webpack:///./src/log.js","webpack:///./src/mp.js","webpack:///./src/request.js","webpack:///./src/validation.js","webpack:///./src/wechatUtils.js"],"names":["checkObjList","obj","hasOwnProperty","impressionListIndex","imp","listMapping","Map","ls","every","x","push","lst","Set","console","log","entries","i","v","set","some","length","isEmptyObj","Object","keys","constructor","EEC","objectEntriesPolyfilll","ownProps","resArray","Array","cd","cm","isArray","impresstion","Error","pcd","_default","productScopeCD","pcm","productScopeCM","product","ilLen","get","ilMap","id","listIndex","list","k","promotions","products","promo","prod","eecObj","eec","Interceptor","_list","use","u","l","remove","clear","fn","Store","GAlog","getLog","wx","document","URL","val","env","reverse","window","localStorage","setItem","JSON","stringify","setStorage","key","data","removeStorage","shift","galog","a","b","Date","time","t","getStorageSync","parse","getItem","e","debug","proxyURL","GAdebugURL","validateHit","maxLogLength","GAURL","method","headers","rest","wxRequestTimeout","enableLogger","validateParams","helpers","queryString","map","join","msg","dest","src","name","merge","date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","formatNumber","n","toString","d","getTime","uuid","replace","c","r","Math","random","floor","copy","setTime","len","deepClone","attr","helper","MP","Logger","config","init","size","add","formatTime","Launch","de","options","create","interceptors","request","response","wechatUtils","validation","args","op","_preprocessArgs","url","getEnvURL","defaultGaData","arg","flat","optionCopy","hitID","generateUUID","cog","mh","opData","cc","cogCd","cogCm","eecobj","checkEEC","assign","res","Request","transferRequest","forEach","send","option","Log","that","String","undefined","toUpperCase","formData","concat","getUrl","transferResponse","xhr","XMLHttpRequest","responseType","onreadystatechange","readyState","status","enqueue","onSuccess","error","onError","open","setRequestHeader","header","timeout","success","fail","isonWechat","weRequest","webRequest","requireList","regexL","call","params","re","RegExp","isString","match","objectToParams","objString","rule","target","checkRequire","regex","checkValidateParamater","s","SceneMapping","sMapping","onWechat","isOnwechat","SMapping","num","getSystemInfo","isAndroid","system","toLowerCase","indexOf","iresPad","model","verreson","y","navigator","userAgent"],"mappings":"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","file":"mp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/*\r\nvar t = {impresstion: [{\r\n      \"id\": \"9bdd2\",\r\n      \"name\": \"Compton T-Shirt\",\r\n      \"price\": \"44.00\",\r\n      \"brand\": \"Compton\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": 0, 'list':\"test\",\r\n      \"dimension1\":\"test\"\r\n    },\r\n    {\r\n      \"id\": \"6c3b0\",\r\n      \"name\": \"Zappix T-Shirt\",\r\n      \"price\": \"99.00\",\r\n      \"brand\": \"Zappix\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": 3,\r\n      'list':\"leave\"\r\n    },\r\n    {\r\n      \"id\": \"6c3b0\",\r\n      \"name\": \"Zappix T-Shirt\",\r\n      \"price\": \"99.00\",\r\n      \"brand\": \"Zappix\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": 3,'list':'homepage'\r\n    },\r\n\r\n    {\r\n      \"id\": \"6c3b0\",\r\n      \"name\": \"Zappix T-Shirt\",\r\n      \"price\": \"99.00\",\r\n      \"brand\": \"Zappix\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": 3,'list':'test'\r\n    }\r\n  ]}\r\n  */\r\n\r\n  import _default from './config';\r\n  function checkObjList(obj){\r\n    if( typeof obj !== 'object'){\r\n      return \"Error, this is not a object\"\r\n    }\r\n    if(obj.hasOwnProperty('list')){\r\n      return true\r\n    }\r\n      return false\r\n  }\r\n\r\n\r\n  function impressionListIndex(imp){\r\n\r\n      let listMapping = new Map()\r\n      let ls = []\r\n      if(imp.every(checkObjList)){\r\n      for (let x of imp){\r\n        if(x.hasOwnProperty('list')){\r\n          ls.push(x['list'])\r\n        }\r\n      }\r\n\r\n      let lst = [...new Set(ls)]\r\n      console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n        listMapping.set(\"type\",\"every\")\r\n      return listMapping\r\n\r\n      }\r\n\r\n      if(imp.some(checkObjList)){\r\n\r\n      for (let [i,x] of imp.entries()){\r\n        if(x.hasOwnProperty('list')){\r\n          ls.push(x['list'])\r\n        }\r\n        ls.push(\"_not_set_\")\r\n      }\r\n      let lst = [...new Set(ls)]\r\n      console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n      listMapping.set(\"type\",\"some\")\r\n      console.log(listMapping)\r\n      return listMapping\r\n      }\r\n\r\n      if(ls.length == imp.length){\r\n        listMapping.set('len',lst.length)\r\n      }\r\n      console.log(ls)\r\n      let lst = [...new Set(ls)]\r\n      console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n      listMapping.set(\"type\",\"none\")\r\n      return listMapping\r\n    }\r\n\r\n\r\n   function isEmptyObj(obj){\r\n     if(Object.keys(obj).length === 0 && obj.constructor === Object){\r\n      return true\r\n     }\r\n     return false\r\n\r\n   }\r\n\r\n  class EEC{\r\n   constructor(){\r\n     this.objectEntriesPolyfilll()\r\n   }\r\n\r\n   objectEntriesPolyfilll(){\r\n     if (!Object.entries)\r\n   Object.entries = function( obj ){\r\n     var ownProps = Object.keys( obj ),\r\n         i = ownProps.length,\r\n         resArray = new Array(i); // preallocate the Array\r\n     while (i--)\r\n       resArray[i] = [ownProps[i], obj[ownProps[i]]];\r\n\r\n     return resArray;\r\n   };\r\n   }\r\n\r\n  impresstion(obj,cd,cm){\r\n      if(!obj.hasOwnProperty(\"impresstion\")) return {}\r\n      if(!Array.isArray(obj.impresstion)) throw new Error(\"impresstion must be a object array\");\r\n      let pcd = {\r\n        ..._default.productScopeCD,\r\n        ...cd\r\n      }\r\n\r\n      let pcm = {\r\n        ..._default.productScopeCM,\r\n        ...cm\r\n      }\r\n      let product = {}\r\n        let ilLen = impressionListIndex(obj.impresstion).get(\"type\")\r\n        let ilMap = impressionListIndex(obj.impresstion)\r\n        ilMap.delete(\"type\")\r\n        //has list on the object\r\n        if(ilLen == \"every\"){\r\n          for (let [id,ls] of ilMap.entries() ){\r\n            product[`il${ls}nm`]=id\r\n          }\r\n\r\n            for (let [i,v] of obj.impresstion.entries()){\r\n\r\n              let listIndex = ilMap.get(v.list) || i+1\r\n              if(v.hasOwnProperty('name')){\r\n                product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n              }\r\n\r\n              if(v.hasOwnProperty('id')){\r\n                product[`il${listIndex}pi${i+1}id`] = v['id']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('brand')){\r\n                product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('variant')){\r\n                product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n              }\r\n\r\n              if(v.hasOwnProperty('price')){\r\n                product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n              }\r\n\r\n              if(v.hasOwnProperty('position')){\r\n                product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n              }\r\n              if(!isEmptyObj(pcd)){\r\n                for(let k in pcd){\r\n                  if(!!k && pcd[k] ){\r\n                    product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n                  }\r\n                }\r\n              }\r\n\r\n              if(!isEmptyObj(pcm)){\r\n                for(let k in pcm){\r\n                  if(!!k && pcm[k] ){\r\n                    product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            return product\r\n\r\n        }else if(ilLen == \"some\"){\r\n          for (let [id,ls] of ilMap.entries() ){\r\n            if(typeof id == \"string\"){\r\n              product[`il${ls}nm`]=id\r\n            }\r\n\r\n            for (let [i,v] of obj.impresstion.entries()){\r\n              let listIndex = ilMap.get(v.list) || ilMap.get(\"_not_set_\")\r\n              if(v.hasOwnProperty('name')){\r\n                product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n              }\r\n\r\n              if(v.hasOwnProperty('id')){\r\n                product[`il${listIndex}pi${i+1}id`] = v['id']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('brand')){\r\n                product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('variant')){\r\n                product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n              }\r\n\r\n              if(v.hasOwnProperty('price')){\r\n                product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n              }\r\n\r\n              if(v.hasOwnProperty('position')){\r\n                product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n              }\r\n\r\n              if(!isEmptyObj(pcd)){\r\n                for(let k in pcd){\r\n                  if(!!k && pcd[k] ){\r\n                    product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n                  }\r\n                }\r\n              }\r\n\r\n              if(!isEmptyObj(pcm)){\r\n                for(let k in pcm){\r\n                  if(!!k && pcm[k] ){\r\n                    product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n\r\n            }\r\n\r\n        console.log(product)\r\n        return product\r\n      }else{\r\n          // no list on the object\r\n          for (let [i,v] of obj.impresstion.entries()){\r\n          let listIndex =  1\r\n          if(v.hasOwnProperty('name')){\r\n            product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n          }\r\n\r\n          if(v.hasOwnProperty('id')){\r\n            product[`il${listIndex}pi${i+1}id`] = v['id']\r\n          }\r\n\r\n          if(v.hasOwnProperty('category')){\r\n            product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n          }\r\n\r\n          if(v.hasOwnProperty('brand')){\r\n            product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n          }\r\n\r\n          if(v.hasOwnProperty('category')){\r\n            product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n          }\r\n\r\n          if(v.hasOwnProperty('variant')){\r\n            product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n          }\r\n\r\n          if(v.hasOwnProperty('price')){\r\n            product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n          }\r\n\r\n          if(v.hasOwnProperty('position')){\r\n            product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n          }\r\n\r\n          if(!isEmptyObj(pcd)){\r\n            for(let k in pcd){\r\n              if(!!k && pcd[k] ){\r\n                product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n              }\r\n            }\r\n          }\r\n\r\n          if(!isEmptyObj(pcm)){\r\n            for(let k in pcm){\r\n              if(!!k && pcm[k] ){\r\n                product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n              }\r\n            }\r\n          }\r\n        }\r\n        }\r\n\r\n         return product\r\n\r\n    }\r\n\r\n    /*var t = {\r\n      \"promotions\": [{\r\n  \"id\": \"bts\",\r\n  \"name\": \"Back To School\",\r\n  \"creative\": \"HOME banner\",\r\n  \"position\": \"right sidebar\"\r\n}]\r\n}*/\r\n\r\n  promotions(obj){\r\n\r\n      if(!obj.hasOwnProperty(\"promotions\") ) return {};\r\n      if(!Array.isArray(obj.promotions)) throw new Error(\"promotion must be a object array\");\r\n\r\n      let product= {}\r\n      ///if(obj.promotions.hasOwnProperty('action')){\r\n      //  product['promoa'] = obj.promotions.action\r\n      //}\r\n\r\n\r\n      for (let [i,v] of obj.promotions.entries()){\r\n        if(v.hasOwnProperty(\"id\")){\r\n          product[`promo${i+1}id`] = v['id']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"name\")){\r\n          product[`promo${i+1}nm`] = v['name']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"creative\")){\r\n          product[`promo${i+1}cr`] = v['creative']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"position\")){\r\n          product[`promo${i+1}ps`] = v['position']\r\n        }\r\n\r\n      }\r\n      return product\r\n\r\n\r\n    }\r\n\r\n    /*promotions(t)\r\n\r\n    var t = {\"products\": [{\r\n        \"id\": \"bc823\",\r\n        \"name\": \"Fuelworks T-Shirt\",\r\n        \"price\": \"92.00\",\r\n        \"brand\": \"Fuelworks\",\r\n        \"category\": \"T-Shirts\",\r\n        \"position\": \"4\"\r\n      }]\r\n    }*/\r\n\r\n    products(obj,cd,cm){\r\n      if(!obj.hasOwnProperty(\"products\") ) return {};\r\n    if(!Array.isArray(obj.products)) throw new Error(\"products must be a object array\");\r\n    let pcd = {\r\n      ..._default.productScopeCD,\r\n      ...cd\r\n    }\r\n\r\n    let pcm = {\r\n      ..._default.productScopeCM,\r\n      ...cm\r\n    }\r\n    let product = {}\r\n    for(let[i,v] of obj.products.entries()){\r\n      if(v.hasOwnProperty('id')){\r\n        product[`pr${i+1}id`] = v['id']\r\n      }\r\n\r\n      if(v.hasOwnProperty('name')){\r\n        product[`pr${i+1}nm`] = v['name']\r\n      }\r\n\r\n      if(v.hasOwnProperty('brand')){\r\n        product[`pr${i+1}br`] = v['brand']\r\n      }\r\n\r\n      if(v.hasOwnProperty('price')){\r\n        product[`pr${i+1}pr`] = v['price']\r\n      }\r\n\r\n      if(v.hasOwnProperty('category')){\r\n        product[`pr${i+1}ca`] = v['category']\r\n      }\r\n\r\n      if(v.hasOwnProperty('variant')){\r\n        product[`pr${i+1}va`] = v['variant']\r\n      }\r\n\r\n      if(v.hasOwnProperty('quantity')){\r\n        product[`pr${i+1}qt`] = v['name']\r\n      }\r\n\r\n      if(v.hasOwnProperty('coupon')){\r\n        product[`pr${i+1}cc`] = v['coupon']\r\n      }\r\n\r\n      if(v.hasOwnProperty('position')){\r\n        product[`pr${i+1}ps`] = v['position']\r\n      }\r\n\r\n      if(!isEmptyObj(pcd)){\r\n        for(let k in pcd){\r\n          if(!!k && pcd[k] ){\r\n            product[`pr${i+1}cd${k}`] = pcd[k]\r\n          }\r\n        }\r\n      }\r\n\r\n      if(!isEmptyObj(pcm)){\r\n        for(let k in pcm){\r\n          if(!!k && pcm[k] ){\r\n            product[`pr${i+1}cm${k}`] = pcm[k]\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n    return product\r\n\r\n\r\n    }\r\n\r\n\r\n    checkEEC(obj,cd,cm){\r\n\r\n      if(obj.hasOwnProperty('impresstion')){\r\n        var imp = this.impresstion(obj,cd,cm)\r\n      }\r\n\r\n      if(obj.hasOwnProperty(\"promotions\")){\r\n        var promo = this.promotions(obj,cd,cm)\r\n      }\r\n\r\n      if(obj.hasOwnProperty(\"products\")){\r\n        var  prod = this.products(obj,cd,cm)\r\n      }\r\n\r\n      let eecObj = {\r\n        ...imp,\r\n        ...promo,\r\n        ...prod\r\n      }\r\n      return eecObj\r\n    }\r\n\r\n}\r\n\r\nconst eec = new EEC()\r\nexport default eec\r\n","class Interceptor {\r\n  constructor() {\r\n    this._list = [];\r\n    this.use = this.u\r\n    this.list = this.l\r\n    this.remove = this.clear\r\n  }\r\n\r\n  u(fn) {\r\n    this._list.push(fn);\r\n  }\r\n\r\n  l() {\r\n    return this._list;\r\n  }\r\n  clear(){\r\n    this._list = []\r\n  }\r\n}\r\n\r\n\r\nexport default Interceptor;\r\n","class Store{\r\n  constructor(){\r\n    this.GAlog = this.GAlog || this.getLog() || []\r\n\r\n  }\r\n  env(){\r\n    if(typeof wx == \"object\"){\r\n\r\n      return \"WECHAT\"\r\n    }\r\n\r\n    if (!!document.URL){\r\n\r\n      return \"WEB\"\r\n    }\r\n  }\r\n\r\n  add(val){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog.push(val)\r\n      this.GAlog = this.GAlog.reverse()\r\n      window.localStorage.setItem(\"gaLog\",JSON.stringify(this.GAlog));\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == \"WECHAT\"){\r\n      this.GAlog.push(val)\r\n      this.GAlog = this.GAlog\r\n      wx.setStorage({key:\"gaLog\",data:this.GAlog})\r\n      return this.getLog()\r\n    }\r\n\r\n  }\r\n\r\n  remove(){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog = []\r\n      window.localStorage.clear()\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == 'WECHAT'){\r\n      this.GAlog = []\r\n      wx.removeStorage({key: 'gaLog'})\r\n      return this.getLog()\r\n    }\r\n    //wechat\r\n  }\r\n\r\n  shift(){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog.shift()\r\n      this.GAlog = this.GAlog.reverse()\r\n      window.localStorage.setItem(\"gaLog\",JSON.stringify(this.GAlog));\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == \"WECHAT\"){\r\n      this.GAlog.shift()\r\n      this.GAlog = this.GAlog\r\n      wx.setStorage({key:\"gaLog\",data:this.GAlog})\r\n      return this.getLog()\r\n    }\r\n\r\n    //wechat\r\n  }\r\n\r\n  size(){\r\n     let galog = this.getLog() || 0\r\n     console.log(galog)\r\n     return galog.length || 0\r\n    //wechat\r\n  }\r\n\r\n  sortByTime(a,b){\r\n  return new Date(a.time) - new Date(b.time)\r\n}\r\n\r\n   getLog(){\r\n     if(this.env() == \"WECHAT\"){\r\n       var t =wx.getStorageSync(\"gaLog\")\r\n     }\r\n     console.log(t)\r\n\r\n     return t\r\n\r\n     if(this.env() == \"WEB\"){\r\n       try{\r\n         return JSON.parse(window.localStorage.getItem(\"gaLog\"))\r\n       }catch(e){\r\n         return window.localStorage.getItem(\"gaLog\")\r\n       };\r\n     }\r\n   }\r\n\r\n}\r\n\r\nexport default Store\r\n","\r\nconst _default = {\r\n  debug:true,\r\n  proxyURL:'',\r\n  GAdebugURL:\"https://www.google-analytics.com/debug/collect\",\r\n  validateHit:false,\r\n  maxLogLength:20,\r\n  GAURL:\"https://www.google-analytics.com/collect\",\r\n  method: 'POST',\r\n  headers: {\r\n      'X-Request-By': 'XMLHttpRequest',\r\n      'Content-Type':'application/x-www-form-urlencoded'\r\n  },\r\n  rest:'',\r\n  wxRequestTimeout:2000,\r\n  enableLogger:true,\r\n  validateParams:true,\r\n};\r\n\r\n\r\nexport default _default\r\n","class helpers {\r\n  constructor() {\r\n  }\r\n\r\n\r\n\r\n  objectToParams(obj){\r\nlet queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\nreturn queryString\r\n  }\r\n\r\n  Error(msg){\r\n    if(msg){\r\n      throw new Error(msg);\r\n    }\r\n  }\r\n\r\n  merge(dest, src) {\r\n  if(JSON.stringify(src) === '{}') return dest\r\n  for (let name in src) {\r\n    if (typeof src[name] == 'object') {\r\n      if (!dest[name]) {\r\n        dest[name] = {};\r\n      }\r\n\r\n      this.merge(dest[name], src[name]);\r\n    } else {\r\n      dest[name] = src[name];\r\n    }\r\n  }\r\n  return dest\r\n}\r\n\r\nformatTime(date){\r\n  const year = date.getFullYear()\r\n  const month = date.getMonth() + 1\r\n  const day = date.getDate()\r\n  const hour = date.getHours()\r\n  const minute = date.getMinutes()\r\n  const second = date.getSeconds()\r\n\r\n  return [year, month, day].map(this.formatNumber).join('/') + ' ' + [hour, minute, second].map(this.formatNumber).join(':')\r\n}\r\n\r\nformatNumber(n){\r\n  n = n.toString()\r\n  return n[1] ? n : '0' + n\r\n}\r\n\r\ngenerateUUID(){\r\n    var d = new Date().getTime();\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = (d + Math.random()*16)%16 | 0;\r\n        d = Math.floor(d/16);\r\n        return (c=='x' ? r : (r&0x7|0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n}\r\n\r\n  deepClone(obj) {\r\n    var copy;\r\n\r\n    // Handle number, boolean, string, null and undefined\r\n    if (null == obj || \"object\" != typeof obj) return obj;\r\n\r\n    // Handle Date\r\n    if (obj instanceof Date) {\r\n        copy = new Date();\r\n        copy.setTime(obj.getTime());\r\n        return copy;\r\n    }\r\n\r\n    // Handle Array\r\n    if (obj instanceof Array) {\r\n        copy = [];\r\n        for (var i = 0, len = obj.length; i < len; i++) {\r\n            copy[i] = this.deepClone(obj[i]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    // Handle Object\r\n    if (obj instanceof Object) {\r\n        copy = {};\r\n        for (var attr in obj) {\r\n            if (obj.hasOwnProperty(attr)) copy[attr] = this.deepClone(obj[attr]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\");\r\n}\r\n\r\n\r\n}\r\n\r\nconst helper = new helpers()\r\n\r\n\r\nexport default helper;\r\n","import MP from './mp'\r\n\r\n/*\r\nlet UA=()=> \"UA-71412438-1\"\r\n\r\nlet config = {\r\n  transferRequest(config){\r\n    console.log('do something before sending the hit')\r\n    //config.data.dp = \"/test\"\r\n    return config\r\n  },\r\n  data:{  //common request payload\r\n    v:1,\r\n    cid:1234556,\r\n    tid:UA(),\r\n    dp:\"placeholder\",\r\n    ds:\"wechat\",\r\n    cd1:\"custom dimension1\",\r\n    pal:'search result'\r\n  },\r\n  transferResponse(res){\r\n    console.log(\"do something for the response\")\r\n    return res\r\n  },\r\n  validateHit:false, // will send to the vvalidation endpoint(optional)\r\n  //proxyURL:\"YOUR_PROXY_URL\"\r\n  onSuccess(config){\r\n    console.log(\"success\") //your custom success function (options)\r\n  },\r\n  onError(config){\r\n    console.log(\"Error\")\r\n  },\r\n  //maxLogLength:10,\r\n  enableLogger:false,\r\n}\r\n\r\nlet GA = new MP(config)\r\n//window.GA= GA\r\nGA.interceptors.request.use(function(config) { // push a handler function before send request\r\n  console.log('check if the data was valid') // process data before send to GA\r\n  return config;\r\n});\r\n\r\nGA.get({\r\n  dp:\"/wechat\",\r\n  t:'event',\r\n  ec:\"test\",\r\n  ea:\"wechatSDK\",\r\n  pa:\"detail\",\r\n  \"products\": [\r\n    {\r\n      \"id\": \"bc823\",\r\n      \"name\": \"Fuelworks T-Shirt\",\r\n      \"price\": \"92.00\",\r\n      \"brand\": \"Fuelworks\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": \"4\"\r\n    },\r\n\r\n    {\r\n      \"id\": \"bc843\",\r\n      \"name\": \" T-Shirt\",\r\n      \"price\": \"92.00\",\r\n      \"brand\": \"Fuelworks\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": \"4\"\r\n    },\r\n  ],\r\n    \"promotions\": [{\r\n  \"id\": \"bts\",\r\n  \"name\": \"Back To School\",\r\n  \"creative\": \"HOME banner\",\r\n  \"position\": \"right sidebar\"\r\n}],\r\nproductScopeCD:{\r\n  '3':'cd3',\r\n  '6' : \"cd6\"\r\n},\r\n\r\nproductScopeCM:{\r\n  '4':100,\r\n}\r\n\r\n})\r\n\r\n*/\r\n\r\n//let s = {\r\n  //debug:true,\r\n  //validateHit:true,\r\n  //proxyURL:\"https://linpiner.com/\",\r\n//}\r\n//let b = new MP(s)\r\n//window.test = new MP()\r\n//a.get(\"/debug/collect\",{data:{test:1}})\r\n//a.post(\"/debug/collect\",{data:{test:2}})\r\n//a.post({data:{tid:\"UA-987654\"}})\r\n//b.post({data:{'test':1}})\r\n//console.log(a.Interceptor)\r\n//window.a = a\r\nexport default MP\r\n","import Store from './common'\r\nimport helper from './helper'\r\n\r\nclass Logger {\r\n  constructor(config){\r\n    this.log = new Store()\r\n    this.maxLogLength = config.maxLogLength\r\n    this.enableLogger = config.enableLogger\r\n    this.init()\r\n  }\r\n\r\n  init(){\r\n\r\n    if(this.size() == 0){\r\n\r\n\r\n    this.log.add(\r\n      {\r\n         time:helper.formatTime(new Date),\r\n         Launch:\"Logger Init\"\r\n      }\r\n    )\r\n  }\r\n  }\r\n\r\n    enqueue(val) {\r\n      if(!this.enableLogger){\r\n        console.log(\"debug mode paused, won't record any log right now\")\r\n        return false\r\n      }\r\n\r\n      if(this.size() < this.maxLogLength){\r\n        this.log.add({\r\n          time : helper.formatTime(new Date),\r\n          ...val,\r\n        });\r\n      }\r\n      if(this.size() >= this.maxLogLength){\r\n        this.log.shift()\r\n        this.log.add({\r\n          time:helper.formatTime(new Date),\r\n          ...val})\r\n      }\r\n      console.log(this.log)\r\n      return this.log\r\n    }\r\n\r\n    dequeue() {\r\n        let de = this.log.shift();\r\n        return de\r\n    }\r\n\r\n\r\n    isEmpty() {\r\n        return this.log.length === 0;\r\n    }\r\n\r\n    clear(){\r\n      this.log.remove()\r\n      return this.log\r\n    }\r\n\r\n    size(){\r\n      return this.log.size()\r\n    }\r\n    getlog(){\r\n      return this.log\r\n    }\r\n}\r\n\r\n\r\nexport default Logger\r\n","import _default from './config';\r\nimport Interceptor from './Interceptor';\r\nimport Request from './request';\r\nimport schema from './validation'\r\nimport helper from './helper'\r\nimport Store from './common'\r\nimport eec from './EecUtils.js'\r\nimport wechatUtils from './wechatUtils'\r\nimport validation from './validation.js'\r\nclass MP{\r\n  constructor(options = {} ){\r\n    this.default = this.create(options)\r\n   this.interceptors = {\r\n    request: new Interceptor(),\r\n  response: new Interceptor(),\r\n};\r\n    this.wechatUtils = wechatUtils\r\n    this.validation = new validation()\r\n  }\r\n\r\n   getLog(){\r\n     let log = new Store();\r\n\r\n     return log.getLog();\r\n   }\r\n\r\n  get(...args){\r\n   let op = this._preprocessArgs(\"GET\",args)\r\n   if(!op){\r\n\r\n   }\r\n   return this.request(op)\r\n  }\r\n\r\n  post(...args) {\r\n    console.log(args)\r\n    let op = this._preprocessArgs('POST', args);\r\n    if (!op) {\r\n      return op\r\n    }\r\n    return this.request(op)\r\n  }\r\n\r\n\r\n  create(options = {}){\r\n    if(JSON.stringify(options) === '{}') throw new Error(\"Error : config could not empty!\")\r\n    let config = {\r\n    ...JSON.parse(JSON.stringify(_default)),\r\n    ...options\r\n  };\r\n  config.url = this.getEnvURL(config)\r\n  helper.merge(config.data,config.defaultGaData)\r\n    return config;\r\n  }\r\n\r\n  _preprocessArgs(method, ...args) {\r\n\r\n\r\n\r\n  let options;\r\n  let arg = args.flat()\r\n  /*if(arg[0].hasOwnProperty(\"productScopeCD\")){\r\n    var cogCd = arg[0].productScopeCD || {}\r\n    delete arg[0].productScopeCD\r\n  }\r\n\r\n    if(arg[0].hasOwnProperty(\"productScopeCM\")){\r\n      var cogCm =arg[0].productScopeCM || {}\r\n      delete arg[0].productScopeCM\r\n    }\r\n  let eecobj = eec.checkEEC(arg[0],cogCd,cogCm)\r\n  helper.merge(arg[0],eecobj)\r\n  */\r\n  if(arg.length == 0){\r\n    options ={\r\n      method,\r\n      url:this.default.url,\r\n    }\r\n  }\r\n  if(typeof arg[0] == \"object\"){\r\n    options = {\r\n      method,\r\n      url:this.default.url,\r\n    data:arg[0]}\r\n  }\r\n  return options;\r\n}\r\n\r\n\r\ngetEnvURL(config){\r\n  if(config.debug && config.validateHit){\r\n    return config.GAdebugURL\r\n  }\r\n  if(config.debug){\r\n    return config.GAURL\r\n  }\r\n  if(!config.debug){\r\n    return config.proxyURL\r\n  }\r\n}\r\n\r\nrequest(options){\r\n\r\n  const optionCopy = helper.deepClone(options)\r\n\r\n  options.hitID = helper.generateUUID()\r\n  // 合并\r\n  let cog = options\r\n  const mh = optionCopy.method\r\n  const opData = optionCopy.data\r\n\r\n  cog= helper.merge(cog,this.default)\r\n  //helper.merge(cog,options)\r\n  cog.method = mh\r\n  cog.data = helper.merge(cog.data,opData)\r\n  // 检验参数\r\n  //替换 baseURL\r\n  //cog.url = this.getEnvURL(cog)\r\n  //console.log(cog)\r\n\r\n  // 变换下请求\r\n\r\n  var cc = helper.deepClone(cog)\r\n  if(cc.data.hasOwnProperty(\"productScopeCD\")){\r\n    var cogCd = cc.data.productScopeCD || {}\r\n    delete cc.data.productScopeCD\r\n  }\r\n\r\n    if(cog.data.hasOwnProperty(\"productScopeCM\")){\r\n      var cogCm = cc.data.productScopeCM || {}\r\n      delete cc.data.productScopeCM\r\n    }\r\n  let eecobj = eec.checkEEC(cc.data,cogCd,cogCm)\r\n\r\n  cc.data = Object.assign(cc.data,eecobj)\r\n  if(cc.data.hasOwnProperty(\"products\")){\r\n    delete cc.data.products\r\n  }\r\n\r\n  if(cc.data.hasOwnProperty(\"promotions\")){\r\n    delete cc.data.promotions\r\n  }\r\n\r\n  if(cc.data.hasOwnProperty(\"impresstion\")){\r\n    delete cc.data.impresstion\r\n  }\r\n   const res = new Request(cc)\r\n   if(cc.validateParams){\r\n     this.validation.use(cc.data)\r\n   }\r\n  let {transferRequest} = cc\r\n\r\n  if(transferRequest) cc = transferRequest(cc)\r\n    //delete cog.transferRequest\r\n    //delete this.default.transferRequest\r\n    //transferRequest = (cog) => cog;\r\n\r\n  let list = this.interceptors.request.list();\r\n  list.forEach(fn => {\r\n  cc = fn(cc);\r\n});\r\n\r\n\r\n  //window.cog = cog\r\n  //window.cog = cog\r\n  //window.res= res\r\n  //cog.success = this.onSuccess\r\n  //cog.fail = this.onError\r\n  // 正式请求\r\n  return res.send(cc)\r\n}\r\n\r\n\r\n}\r\n\r\nexport default MP\r\n","import Logger from './log'\r\nimport _default from './config'\r\n\r\nclass Request {\r\n  constructor(option){\r\n     this.Log = new Logger(option)\r\n  }\r\n\r\n\r\n  webRequest(option){\r\n    //let {url,method,data} = option\r\n    // object to params?\r\n      let that = this\r\n      window.option = option\r\n      if (String(option) !== '[object Object]') return undefined\r\n      option.method = option.method ? option.method.toUpperCase() : 'POST'\r\n      option.data = option.data || {}\r\n      var formData = []\r\n      for (var key in option.data) {\r\n        formData.push(''.concat(key, '=', option.data[key]))\r\n      }\r\n      option.data = formData.join('&')\r\n\r\n      if (option.method === 'GET') {\r\n        option.getUrl= option.url + \"?\" + option.data\r\n      }\r\n      let {transferResponse} = option\r\n\r\n      console.log(option)\r\n      var xhr = new XMLHttpRequest()\r\n      xhr.responseType = option.responseType || 'json'\r\n      xhr.onreadystatechange = function () {\r\n        if (xhr.readyState === 4) {\r\n          if (xhr.status === 200) {\r\n            if(transferResponse)\r\n            {\r\n              console.log(xhr.response)\r\n              that.Log.enqueue({\r\n                url:option.url?option.url:option.getUrl,\r\n                data:option.data,\r\n                res:option.validateHit ? transferResponse(xhr.response): xhr.status,\r\n                hitID:option.hitID,\r\n                //transferResponse(xhr.response)\r\n              })\r\n              if(!!option.onSuccess){\r\n                option.onSuccess(option)\r\n              }\r\n\r\n                //delete option.transferRespons\r\n                //transferResponse = (res)=> res\r\n\r\n\r\n            }else{\r\n              that.Log.enqueue({\r\n                url:option.url?option.url:option.getUrl,\r\n                data:option.data,\r\n                res:option.validateHit ? xhr.response : xhr.status,\r\n                hitID:option.hitID,\r\n              })\r\n              if(!!option.onSuccess){\r\n                option.onSuccess(option)\r\n              }\r\n\r\n            }\r\n          } else {\r\n              //this.fail()\r\n              that.Log.enqueue({\r\n                error:\"Error\",\r\n                url:option.url?option.url:option.getUrl,\r\n                res:option.validateHit ? xhr.response : \"Error\",\r\n                hitID:option.hitID,\r\n                //data:option.data,\r\n                //transferResponse(xhr.response)\r\n              })\r\n              if(!!option.onError){\r\n              option.onError(option)\r\n              }\r\n\r\n              return \"Request Fail\"\r\n\r\n          }\r\n        }\r\n      }\r\n      if(option.method == \"GET\"){\r\n        xhr.open(option.method, option.getUrl, true)\r\n        xhr.send()\r\n      }\r\n\r\n      if (option.method === 'POST') {\r\n        xhr.open(option.method, option.url, true)\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\r\n        xhr.send(option.data)\r\n      }\r\n      //console.loh(t)\r\n    }\r\n\r\n\r\nweRequest(options){\r\n  let that = this\r\n   let {transferResponse} = options\r\n   wx.request({\r\n     url:options.url,\r\n     method:options.method,\r\n     data:options.data,\r\n     header:options.headers,\r\n     timeout:options.wxRequestTimeout,\r\n     success(res){\r\n       console.log(res)\r\n       if(transferResponse){\r\n       that.Log.enqueue({\r\n         url:options.url?options.url:options.getUrl,\r\n         data:options.data,\r\n         res:options.transferResponse(res),\r\n         hitID:options.hitID,\r\n       })\r\n     }else{\r\n      that.Log.enqueue({\r\n         url:options.url?options.url:options.getUrl,\r\n         data:options.data,\r\n         res:res,\r\n         hitID:options.hitID,\r\n       })\r\n     }\r\n       if(!!options.onSuccess){\r\n         options.onSuccess(options)\r\n       }\r\n     },\r\n     fail(res){\r\n       console.log(res)\r\n       if(transferResponse){\r\n       that.Log.enqueue({\r\n         url:options.url?options.url:options.getUrl,\r\n         data:options.data,\r\n         res:options.transferResponse(res),\r\n         hitID:options.hitID,\r\n       })\r\n     }else{\r\n       that.Log.enqueue({\r\n         url:options.url?options.url:options.getUrl,\r\n         data:options.data,\r\n         res:res,\r\n         hitID:options.hitID,\r\n       })\r\n     }\r\n       if(!!options.onError){\r\n         options.onError(options)\r\n       }\r\n\r\n     }\r\n   })\r\n}\r\nisonWechat(){\r\n  return typeof wx == 'object'? true : false\r\n}\r\n\r\nsend(options){\r\n\r\n  if(this.isonWechat()){\r\n    return this.weRequest(options)\r\n  }\r\n  return this.webRequest(options)\r\n\r\n}\r\n\r\n}\r\n\r\nexport default Request\r\n","\r\nclass validation{\r\n  constructor(){\r\n   this.v = this.init()\r\n   this.requireList = ['tid','v']\r\n   //this.anyList = [['dp','dl','dh']]\r\n   this.regexL = {\r\n     \"tid\":\"UA-[0-9]*-[0-9]*\"\r\n   }\r\n\r\n  }\r\n\r\n  add(fn){\r\n    this.v.push(fn)\r\n  }\r\n\r\n  use(obj){\r\n    var that = this\r\n    for(let fn of this.v){\r\n      obj = fn.call(that, obj)\r\n    }\r\n    return obj\r\n  }\r\n\r\n  checkRequire(obj){\r\n    var that = this\r\n    for(let x of this.requireList){\r\n        if(!obj.hasOwnProperty(x)){\r\n          throw new Error(`${x} is required`)\r\n        }\r\n    }\r\n    return obj\r\n\r\n  }\r\n\r\n\r\n  addRequirelist(params){\r\n     return this.requireList.push(params)\r\n  }\r\n\r\n  /*addAnyList(params){\r\n    return this.anyList.push(params)\r\n  }*/\r\n\r\n  addRegexList(obj){\r\n    this.regexL =  {\r\n      ...this.regexL,\r\n      ...obj\r\n    }\r\n    return this.regexL\r\n  }\r\n\r\n\r\n  regex(obj){\r\n    let that = this\r\n    for(let x in this.regexL){\r\n      if(!obj.hasOwnProperty(x)){\r\n        throw new Error(`No ${that.x} on object`)\r\n      }\r\n      let re = new RegExp(this.regexL[x],'ig')\r\n      console.log(re)\r\n      console.log(obj[x])\r\n      if(this.isString(x)){\r\n      if(!String(obj[x]).match(re)){\r\n        throw new Error(`${x} do not match ${that.regexL[x]}`)\r\n      }\r\n    }\r\n  }\r\n    return obj\r\n\r\n  }\r\n\r\n\r\n  length(obj){\r\n\r\n    function objectToParams(obj){\r\n  let queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\n  return queryString\r\n    }\r\n\r\n    let objString = this.objectToParams(obj)\r\n    console.log(objString.length)\r\n    if(objString.length > 8012){\r\n      throw new Error(\"Hit was too long, hit length must under 8012\")\r\n    }\r\n    return obj\r\n  }\r\n\r\n  /*anyone(obj){\r\n    var that = this\r\n    for(let l of this.anyList){\r\n      if(Object.keys(obj).filter((val)=>l.includes(val)).length == 0){\r\n        throw new Error(`must contains anyone of ${JSON.stringify(l)}`)\r\n      }\r\n    }\r\n\r\n    return obj\r\n  }*/\r\n\r\n  pa(obj,rule,target){\r\n\r\n  }\r\n\r\n  checkValidateParamater(obj){\r\n\r\n    for(let x in obj){\r\n      //if(typeof x == 'object'{continue}\r\n      if(this.isString(x)){\r\n      if(String(obj[x]).match(/@?&=/i)){\r\n        throw new Error(\"Can not contains '@?&=' in the params\");\r\n      }\r\n    }\r\n  }\r\n    return obj\r\n  }\r\n\r\n  objectToParams(obj){\r\nlet queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\nreturn queryString\r\n  }\r\n\r\n  init(obj){\r\n    let t = []\r\n    t.push(this.checkRequire)\r\n    t.push(this.regex)\r\n    //t.push(this.anyone)\r\n    t.push(this.checkValidateParamater)\r\n    t.push(this.length)\r\n    return t\r\n  }\r\n\r\n  resetTodefault(){\r\n    this.requireList = ['tid','v']\r\n    //this.anyList = [['dp','dl','dh']]\r\n    this.regexL = {\r\n      \"tid\":\"UA-[0-9]*-[0-9]*\"\r\n    }\r\n  }\r\n\r\n  isString(s){\r\n    if (typeof s === 'string' || s instanceof String){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n\r\n}\r\n\r\n//check hit payload lengtg\r\n//check required paramters\r\n//check if there is any unvalid paramters ? &\r\n//check if mobile or web\r\n//check EEC object\r\n//check pa for EEC\r\n\r\n\r\nexport default validation\r\n","\r\nconst SceneMapping = {\r\n    1001: \"发现栏小程序主入口\",\r\n    1005: \"顶部搜索框的搜索结果页\",\r\n    1006: \"发现栏小程序主入口搜索框的搜索结果页\",\r\n    1007: \"单人聊天会话中的小程序消息卡片\",\r\n    1008: \"群聊会话中的小程序消息卡片\",\r\n    1011: \"扫描二维码\",\r\n    1012: \"长按图片识别二维码\",\r\n    1013: \"手机相册选取二维码\",\r\n    1014: \"小程序模版消息\",\r\n    1017: \"前往体验版的入口页\",\r\n    1019: \"微信钱包\",\r\n    1020: \"公众号profile页相关小程序列表\",\r\n    1022: \"聊天顶部置顶小程序入口\",\r\n    1023: \"安卓系统桌面图标\",\r\n    1024: \"小程序profile页\",\r\n    1025: \"扫描一维码\",\r\n    1026: \"附近小程序列表\",\r\n    1027: \"顶部搜索框搜索结果页“使用过的小程序”列表\",\r\n    1028: \"我的卡包\",\r\n    1029: \"卡券详情页\",\r\n    1030: \"自动化测试下打开小程序\",\r\n    1031: \"长按图片识别一维码\",\r\n    1032: \"手机相册选取一维码\",\r\n    1034: \"微信支付完成页\",\r\n    1035: \"公众号自定义菜单\",\r\n    1036: \"App 分享消息卡片\",\r\n    1037: \"小程序打开小程序\",\r\n    1038: \"从另一个小程序返回\",\r\n    1039: \"摇电视\",\r\n    1042: \"添加好友搜索框的搜索结果页\",\r\n    1043: \"公众号模板消息\",\r\n    1044: \"带shareTicket的小程序消息卡片\",\r\n    1045: \"朋友圈广告\",\r\n    1046: \"朋友圈广告详情页\",\r\n    1047: \"扫描小程序码\",\r\n    1048: \"长按图片识别小程序码\",\r\n    1049: \"手机相册选取小程序码\",\r\n    1052: \"卡券的适用门店列表\",\r\n    1053: \"搜一搜的结果页\",\r\n    1054: \"顶部搜索框小程序快捷入口\",\r\n    1056: \"音乐播放器菜单\",\r\n    1057: \"钱包中的银行卡详情页\",\r\n    1058: \"公众号文章\",\r\n    1059: \"体验版小程序绑定邀请页\",\r\n    1064: \"微信连Wifi状态栏\",\r\n    1067: \"公众号文章广告\",\r\n    1068: \"附近小程序列表广告\",\r\n    1069: \"移动应用\",\r\n    1071: \"钱包中的银行卡列表页\",\r\n    1072: \"二维码收款页面\",\r\n    1073: \"客服消息列表下发的小程序消息卡片\",\r\n    1074: \"公众号会话下发的小程序消息卡片\",\r\n    1077: \"摇周边\",\r\n    1078: \"连Wi-Fi成功页\",\r\n    1079: \"微信游戏中心\",\r\n    1081: \"客服消息下发的文字链\",\r\n    1082: \"公众号会话下发的文字链\",\r\n    1084: \"朋友圈广告原生页\",\r\n    1089: \"微信聊天主界面下拉\",\r\n    1090: \"长按小程序右上角菜单唤出最近使用历史\",\r\n    1091: \"公众号文章商品卡片\",\r\n    1092: \"城市服务入口\",\r\n    1095: \"小程序广告组件\",\r\n    1096: \"聊天记录\",\r\n    1097: \"微信支付签约页\",\r\n    1099: \"页面内嵌插件\",\r\n    1102: \"公众号 profile 页服务预览\",\r\n    default:\"unknow scene value\"\r\n  };\r\n\r\n\r\nclass wechatUtils{\r\n  construct(sMapping){\r\n    this.onWechat = this.isOnwechat()\r\n    this.SMapping = sMapping || SceneMapping\r\n  }\r\n  isOnwechat(){\r\n    if(typeof wx == 'object'){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  mappingSceneToCN(num){\r\n    if(this.onWechat){\r\n      return this.SMapping[num] || this.SMapping['default']\r\n    }\r\n    return ''\r\n  }\r\n\r\n  generateUA(){\r\n    if(this.onWechat){\r\n    let res = wx.getSystemInfo();\r\n    let isAndroid = res.system.toLowerCase().indexOf('android') > -1;\r\n    let iresPad = !isAndroid && res.model.toLowerCase().indexOf('iphone') == -1;\r\n      if (isAndroid) {\r\n        return \"Mozilla/5.0 (Linux; U; \" + res.system + \"; \" + res.model + \" Build/000000) AppleWebKit/537.36 (KHTML, like Gecko)Verreson/4.0 Chrome/49.0.0.0 Mobile Safari/537.36 MicroMessenger/\" + res.verreson;\r\n      } else if (!iresPad) {\r\n\r\n    let v = res.system.replace(/^.*?([0-9.]+).*?$/, function (x, y) { return y; }).replace(/\\./g, '_');\r\n      return \"Mozilla/5.0 (iPhone; CPU iPhone OS \" + v + \" like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92 MicroMessenger/\" + res.verreson;\r\n    } else {\r\n      let v = res.system.replace(/^.*?([0-9.]+).*?$/, function (x, y) { return y; }).replace(/\\./g, '_');\r\n      return \"Mozilla/5.0 (iPad; CPU OS \" + v + \" like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/10A406 MicroMessenger/\" + res.verreson;\r\n        }\r\n    }\r\n    if(typeof navigator == 'object'){\r\n      return navigator.userAgent\r\n    }\r\n    return ''\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default wechatUtils\r\n"],"sourceRoot":""}