{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/Interceptor.js","webpack:///./src/config.js","webpack:///./src/index.js","webpack:///./src/mp.js","webpack:///./src/request.js"],"names":["Interceptor","_list","use","u","list","l","remove","clear","fn","push","_default","debug","proxyURL","GAdebugURL","KeepTransferRequest","KeepTransferReponse","validateHit","GAURL","method","headers","common","data","rest","t","transferRequest","config","test","transferResponse","res","console","log","a","MP","interceptors","request","get","post","options","create","response","args","op","_preprocessArgs","JSON","parse","stringify","arg","flat","length","url","constructor","Object","undefined","Request","cog","getEnvURL","forEach","success","onSuccess","fail","onError","send","option","String","toUpperCase","formData","key","concat","join","getUrl","transferRespons","xhr","XMLHttpRequest","responseType","onreadystatechange","readyState","status","open","setRequestHeader","wx","isonWechat","weRequest","ajax"],"mappings":"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","file":"mp.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","class Interceptor {\r\n  constructor() {\r\n    this._list = [];\r\n    this.use = this.u\r\n    this.list = this.l\r\n    this.remove = this.clear\r\n  }\r\n\r\n  u(fn) {\r\n    this._list.push(fn);\r\n  }\r\n\r\n  l() {\r\n    return this._list;\r\n  }\r\n  clear(){\r\n    this._list = []\r\n  }\r\n}\r\n\r\n\r\nexport default Interceptor;\r\n","const _default = {\r\n  debug:true,\r\n  proxyURL:'',\r\n  GAdebugURL:\"https://www.google-analytics.com/debug/collect\",\r\n  KeepTransferRequest:false,\r\n  KeepTransferReponse:false,\r\n  validateHit:false,\r\n  GAURL:\"https://www.google-analytics.com/collect\",\r\n  method: 'get',\r\n  headers: {\r\n    common: {\r\n      'X-Request-By': 'XMLHttpRequest',\r\n    },\r\n  },\r\n  data:{\r\n\r\n  },\r\n  rest:'',\r\n};\r\n\r\nexport default _default\r\n","import MP from './mp'\r\nlet t = {\r\n  transferRequest(config){\r\n    config.test = \"new tt\"\r\n    return config\r\n  },\r\n\r\n  transferResponse(res){\r\n    res.test = \"test\"\r\n    console.log(res)\r\n    return res\r\n  },\r\n  validateHit:true,\r\n}\r\nlet a = new MP(t)\r\n\r\na.interceptors.request.use(function(config) {\r\n  config.rest = 'true';\r\n  //alert('tt')\r\n  return config;\r\n});\r\n\r\n\r\n//window.test = new MP()\r\na.get(\"/debug/collect\",{data:{test:1}})\r\na.post(\"/debug/collect\",{data:{test:2}})\r\n\r\n//console.log(a.Interceptor)\r\nconsole.log(a)\r\n\r\nexport default MP\r\n","import _default from './config'\r\nimport Interceptor from './Interceptor';\r\nimport Request from './request'\r\nfunction request(){\r\n\r\n}\r\n\r\nclass MP{\r\n  constructor(options = {} ){\r\n    this.default = this.create(options)\r\n   this.interceptors = {\r\n  request: new Interceptor(),\r\n  response: new Interceptor(),\r\n};\r\n  }\r\n\r\n  get(...args){\r\n   let op = this._preprocessArgs(\"GET\",args)\r\n   if(!op){\r\n\r\n   }\r\n   return this.request(op)\r\n  }\r\n\r\n  post(...args) {\r\n    let op = this._preprocessArgs('POST', args);\r\n     console.log(op)\r\n    if (!op) {\r\n      return op\r\n    }\r\n    return this.request(op)\r\n  }\r\n\r\n\r\n  create(options = {}){\r\n    let config = {\r\n    ...JSON.parse(JSON.stringify(_default)),\r\n    ...options\r\n  };\r\n    return config;\r\n  }\r\n\r\n\r\n\r\n\r\n  _preprocessArgs(method, ...args) {\r\n  let options;\r\n  //\r\n  let arg = args.flat()\r\n  //console.log(arg)\r\n  if (arg.length == 1 && typeof arg[0] == 'string') {\r\n    options = { method, url: arg[0] };\r\n  } else if (arg.length != 1 && arg[1].constructor == Object) {\r\n    options = {\r\n      ...arg[1],\r\n      method,\r\n      url:arg[0],\r\n    };\r\n  } else {\r\n    return undefined;\r\n  }\r\n  return options;\r\n}\r\npreSent(fn){\r\n\r\n}\r\nonSuccess(fn){\r\n  console.log('res')\r\n}\r\n\r\nonError(fn){\r\n  console.log(\"error\")\r\n}\r\n\r\ngetEnvURL(config){\r\n  if(config.debug && config.validateHit){\r\n    return config.GAdebugURL\r\n  }\r\n  if(config.debug){\r\n    return config.GAURL\r\n  }\r\n  if(!config.debug){\r\n    return config.proxyURL\r\n  }\r\n}\r\n\r\nrequest(options){\r\n\r\n  const res = new Request()\r\n  // 合并\r\n  var cog = {\r\n    ...this.default,\r\n    ...options\r\n  }\r\n\r\n  console.log(cog)\r\n  // 检验参数\r\n\r\n  //替换 baseURL\r\n  cog.url = this.getEnvURL(cog)\r\n  //console.log(cog)\r\n\r\n  // 变换下请求\r\n  const {transferRequest} = cog\r\n  if(!cog.KeepTransferRequest) delete cog.transferRequest\r\n  if(transferRequest) cog = transferRequest(cog)\r\n  console.log(cog)\r\n  let list = this.interceptors.request.list();\r\n  list.forEach(fn => {\r\n  cog = fn(cog);\r\n});\r\n\r\n  console.log(cog)\r\n  //window.cog = cog\r\n  //window.res= res\r\n  cog.success = this.onSuccess\r\n  cog.fail = this.onError\r\n  // 正式请求\r\n  return res.send(cog)\r\n}\r\n\r\n\r\n}\r\n\r\nexport default MP\r\n","\r\n\r\nclass Request{\r\n  constructor(){\r\n  }\r\n\r\n  ajax(options){\r\n    this.request(options)\r\n  }\r\n\r\n  request(option){\r\n    //let {url,method,data} = option\r\n    // object to params?\r\n      if (String(option) !== '[object Object]') return undefined\r\n      option.method = option.method ? option.method.toUpperCase() : 'GET'\r\n      option.data = option.data || {}\r\n      var formData = []\r\n      for (var key in option.data) {\r\n        formData.push(''.concat(key, '=', option.data[key]))\r\n      }\r\n      option.data = formData.join('&')\r\n\r\n      if (option.method === 'GET') {\r\n        option.getUrl= option.url\r\n      }\r\n      const {transferResponse} = option\r\n      if(!option.KeepTransferReponse) delete option.transferRespons\r\n      console.log(option)\r\n      var xhr = new XMLHttpRequest()\r\n      xhr.responseType = option.responseType || 'json'\r\n      xhr.onreadystatechange = function () {\r\n        if (xhr.readyState === 4) {\r\n          if (xhr.status === 200) {\r\n            if(transferResponse)\r\n            {\r\n              option.success(transferResponse(xhr.response))\r\n            }else{\r\n              option.success(xhr.response)\r\n            }\r\n          } else {\r\n              //this.fail()\r\n              option.fail()\r\n          }\r\n        }\r\n      }\r\n      if(option.method == \"GET\"){\r\n        xhr.open(option.method, option.getUrl, true)\r\n        xhr.send()\r\n      }\r\n\r\n      if (option.method === 'POST') {\r\n        xhr.open(option.method, option.url, true)\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\r\n        xhr.send(option.data)\r\n      }\r\n\r\n      //console.loh(t)\r\n    }\r\n\r\n\r\nweRequest(options){\r\n   console.log(\"test on wechat\")\r\n}\r\nisonWechat(){\r\n  return typeof wx == 'object'? true : false\r\n}\r\n\r\nsend(options){\r\n  if(this.isonWechat()){\r\n    return this.weRequest(options)\r\n  }\r\n  return this.ajax(options)\r\n\r\n}\r\n\r\n}\r\n\r\nexport default Request\r\n"],"sourceRoot":""}