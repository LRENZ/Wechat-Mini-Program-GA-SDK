{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/EecUtils.js","webpack:///./src/Interceptor.js","webpack:///./src/common.js","webpack:///./src/config.js","webpack:///./src/ga.js","webpack:///./src/helper.js","webpack:///./src/index.js","webpack:///./src/log.js","webpack:///./src/request.js","webpack:///./src/validation.js","webpack:///./src/wechatUtils.js"],"names":["checkObjList","obj","hasOwnProperty","impressionListIndex","imp","listMapping","Map","ls","every","x","push","lst","Set","entries","i","v","set","some","length","isEmptyObj","Object","keys","constructor","EEC","objectEntriesPolyfilll","ownProps","resArray","Array","cd","cm","isArray","impresstion","Error","pcd","_default","productScopeCD","pcm","productScopeCM","product","ilLen","get","ilMap","id","listIndex","list","k","promotions","products","promo","prod","eecObj","eec","Interceptor","_list","use","u","l","remove","clear","fn","Store","name","GAlog","getLog","loggerName","wx","document","URL","val","env","reverse","window","localStorage","setItem","JSON","stringify","setStorage","key","data","removeStorage","shift","galog","a","b","Date","time","t","getStorageSync","parse","getItem","e","debug","proxyURL","GAdebugURL","validateHit","maxLogLength","GAURL","method","headers","rest","wxRequestTimeout","enableLogger","validateParams","LoggerName","GA","options","weUtils","wechatUtils","create","interceptors","request","response","validation","log","args","op","_preprocessArgs","config","url","getEnvURL","ua","generateUA","helper","merge","defaultGaData","arg","flat","optionCopy","deepClone","hitID","generateUUID","cog","mh","opData","cc","cogCd","cogCm","eecobj","checkEEC","assign","res","Request","transferRequest","forEach","send","helpers","queryString","map","join","msg","dest","src","date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","second","getSeconds","formatNumber","n","toString","d","getTime","uuid","replace","c","r","Math","random","floor","copy","setTime","len","attr","Logger","init","size","add","formatTime","Launch","console","de","option","Log","that","String","undefined","toUpperCase","formData","concat","getUrl","transferResponse","xhr","XMLHttpRequest","responseType","onreadystatechange","readyState","status","enqueue","type","removeEmptyObjKey","onSuccess","onError","open","setRequestHeader","header","timeout","success","fail","isonWechat","weRequest","webRequest","requireList","regexL","call","params","re","RegExp","isString","match","objectToParams","objString","rule","target","checkRequire","regex","checkValidateParamater","s","SceneMapping","Mapping","currentMap","currentOutput","input","current","find","item","inputRegex","outputName","m","sMapping","onWechat","isOnwechat","SMapping","table","field","num","getSystemInfoSync","isAndroid","system","toLowerCase","indexOf","iresPad","model","version","y","navigator","userAgent","pages","getCurrentPages","currentPage","route","urlWithArgs","value","substring"],"mappings":"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","file":"ga.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","\r\n\r\n  import _default from './config';\r\n  function checkObjList(obj){\r\n    if( typeof obj !== 'object'){\r\n      return \"Error, this is not a object\"\r\n    }\r\n    if(obj.hasOwnProperty('list')){\r\n      return true\r\n    }\r\n      return false\r\n  }\r\n\r\n\r\n  function impressionListIndex(imp){\r\n\r\n      let listMapping = new Map()\r\n      let ls = []\r\n      if(imp.every(checkObjList)){\r\n      for (let x of imp){\r\n        if(x.hasOwnProperty('list')){\r\n          ls.push(x['list'])\r\n        }\r\n      }\r\n\r\n      let lst = [...new Set(ls)]\r\n      //console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n        listMapping.set(\"type\",\"every\")\r\n      return listMapping\r\n\r\n      }\r\n\r\n      if(imp.some(checkObjList)){\r\n\r\n      for (let [i,x] of imp.entries()){\r\n        if(x.hasOwnProperty('list')){\r\n          ls.push(x['list'])\r\n        }\r\n        ls.push(\"_not_set_\")\r\n      }\r\n      let lst = [...new Set(ls)]\r\n      //console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n      listMapping.set(\"type\",\"some\")\r\n      //console.log(listMapping)\r\n      return listMapping\r\n      }\r\n\r\n      if(ls.length == imp.length){\r\n        listMapping.set('len',lst.length)\r\n      }\r\n      //console.log(ls)\r\n      let lst = [...new Set(ls)]\r\n      //console.log(lst)\r\n      for (let [i,v] of lst.entries()){\r\n        listMapping.set(v,i+1)\r\n      }\r\n      listMapping.set(\"type\",\"none\")\r\n      return listMapping\r\n    }\r\n\r\n\r\n   function isEmptyObj(obj){\r\n     if(Object.keys(obj).length === 0 && obj.constructor === Object){\r\n      return true\r\n     }\r\n     return false\r\n\r\n   }\r\n\r\n  class EEC{\r\n   constructor(){\r\n     this.objectEntriesPolyfilll()\r\n   }\r\n\r\n   objectEntriesPolyfilll(){\r\n     if (!Object.entries)\r\n   Object.entries = function( obj ){\r\n     var ownProps = Object.keys( obj ),\r\n         i = ownProps.length,\r\n         resArray = new Array(i); // preallocate the Array\r\n     while (i--)\r\n       resArray[i] = [ownProps[i], obj[ownProps[i]]];\r\n\r\n     return resArray;\r\n   };\r\n   }\r\n\r\n  impresstion(obj,cd,cm){\r\n      if(!obj.hasOwnProperty(\"impresstion\")) return {}\r\n      if(!Array.isArray(obj.impresstion)) throw new Error(\"impresstion must be a object array\");\r\n      let pcd = {\r\n        ..._default.productScopeCD,\r\n        ...cd\r\n      }\r\n\r\n      let pcm = {\r\n        ..._default.productScopeCM,\r\n        ...cm\r\n      }\r\n      let product = {}\r\n        let ilLen = impressionListIndex(obj.impresstion).get(\"type\")\r\n        let ilMap = impressionListIndex(obj.impresstion)\r\n        ilMap.delete(\"type\")\r\n        //has list on the object\r\n        if(ilLen == \"every\"){\r\n          for (let [id,ls] of ilMap.entries() ){\r\n            product[`il${ls}nm`]=id\r\n          }\r\n\r\n            for (let [i,v] of obj.impresstion.entries()){\r\n\r\n              let listIndex = ilMap.get(v.list) || i+1\r\n              if(v.hasOwnProperty('name')){\r\n                product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n              }\r\n\r\n              if(v.hasOwnProperty('id')){\r\n                product[`il${listIndex}pi${i+1}id`] = v['id']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('brand')){\r\n                product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('variant')){\r\n                product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n              }\r\n\r\n              if(v.hasOwnProperty('price')){\r\n                product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n              }\r\n\r\n              if(v.hasOwnProperty('position')){\r\n                product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n              }\r\n              if(!isEmptyObj(pcd)){\r\n                for(let k in pcd){\r\n                  if(!!k && pcd[k] ){\r\n                    product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n                  }\r\n                }\r\n              }\r\n\r\n              if(!isEmptyObj(pcm)){\r\n                for(let k in pcm){\r\n                  if(!!k && pcm[k] ){\r\n                    product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            return product\r\n\r\n        }else if(ilLen == \"some\"){\r\n          for (let [id,ls] of ilMap.entries() ){\r\n            if(typeof id == \"string\"){\r\n              product[`il${ls}nm`]=id\r\n            }\r\n\r\n            for (let [i,v] of obj.impresstion.entries()){\r\n              let listIndex = ilMap.get(v.list) || ilMap.get(\"_not_set_\")\r\n              if(v.hasOwnProperty('name')){\r\n                product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n              }\r\n\r\n              if(v.hasOwnProperty('id')){\r\n                product[`il${listIndex}pi${i+1}id`] = v['id']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('brand')){\r\n                product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n              }\r\n\r\n              if(v.hasOwnProperty('category')){\r\n                product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n              }\r\n\r\n              if(v.hasOwnProperty('variant')){\r\n                product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n              }\r\n\r\n              if(v.hasOwnProperty('price')){\r\n                product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n              }\r\n\r\n              if(v.hasOwnProperty('position')){\r\n                product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n              }\r\n\r\n              if(!isEmptyObj(pcd)){\r\n                for(let k in pcd){\r\n                  if(!!k && pcd[k] ){\r\n                    product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n                  }\r\n                }\r\n              }\r\n\r\n              if(!isEmptyObj(pcm)){\r\n                for(let k in pcm){\r\n                  if(!!k && pcm[k] ){\r\n                    product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n\r\n            }\r\n\r\n        //console.log(product)\r\n        return product\r\n      }else{\r\n          // no list on the object\r\n          for (let [i,v] of obj.impresstion.entries()){\r\n          let listIndex =  1\r\n          if(v.hasOwnProperty('name')){\r\n            product[`il${listIndex}pi${i+1}nm`] = v['name']\r\n          }\r\n\r\n          if(v.hasOwnProperty('id')){\r\n            product[`il${listIndex}pi${i+1}id`] = v['id']\r\n          }\r\n\r\n          if(v.hasOwnProperty('category')){\r\n            product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n          }\r\n\r\n          if(v.hasOwnProperty('brand')){\r\n            product[`il${listIndex}pi${i+1}br`] = v['brand']\r\n          }\r\n\r\n          if(v.hasOwnProperty('category')){\r\n            product[`il${listIndex}pi${i+1}ca`] = v['category']\r\n          }\r\n\r\n          if(v.hasOwnProperty('variant')){\r\n            product[`il${listIndex}pi${i+1}va`] = v['variant']\r\n          }\r\n\r\n          if(v.hasOwnProperty('price')){\r\n            product[`il${listIndex}pi${i+1}pr`] = v['price']\r\n          }\r\n\r\n          if(v.hasOwnProperty('position')){\r\n            product[`il${listIndex}pi${i+1}ps`] = v['position']\r\n          }\r\n\r\n          if(!isEmptyObj(pcd)){\r\n            for(let k in pcd){\r\n              if(!!k && pcd[k] ){\r\n                product[`il${listIndex}pi${i+1}cd${k}`] = pcd[k]\r\n              }\r\n            }\r\n          }\r\n\r\n          if(!isEmptyObj(pcm)){\r\n            for(let k in pcm){\r\n              if(!!k && pcm[k] ){\r\n                product[`il${listIndex}pi${i+1}cm${k}`] = pcm[k]\r\n              }\r\n            }\r\n          }\r\n        }\r\n        }\r\n\r\n         return product\r\n\r\n    }\r\n\r\n    /*var t = {\r\n      \"promotions\": [{\r\n  \"id\": \"bts\",\r\n  \"name\": \"Back To School\",\r\n  \"creative\": \"HOME banner\",\r\n  \"position\": \"right sidebar\"\r\n}]\r\n}*/\r\n\r\n  promotions(obj){\r\n\r\n      if(!obj.hasOwnProperty(\"promotions\") ) return {};\r\n      if(!Array.isArray(obj.promotions)) throw new Error(\"promotion must be a object array\");\r\n\r\n      let product= {}\r\n      ///if(obj.promotions.hasOwnProperty('action')){\r\n      //  product['promoa'] = obj.promotions.action\r\n      //}\r\n\r\n\r\n      for (let [i,v] of obj.promotions.entries()){\r\n        if(v.hasOwnProperty(\"id\")){\r\n          product[`promo${i+1}id`] = v['id']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"name\")){\r\n          product[`promo${i+1}nm`] = v['name']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"creative\")){\r\n          product[`promo${i+1}cr`] = v['creative']\r\n        }\r\n\r\n        if(v.hasOwnProperty(\"position\")){\r\n          product[`promo${i+1}ps`] = v['position']\r\n        }\r\n\r\n      }\r\n      return product\r\n\r\n\r\n    }\r\n\r\n    /*promotions(t)\r\n\r\n    var t = {\"products\": [{\r\n        \"id\": \"bc823\",\r\n        \"name\": \"Fuelworks T-Shirt\",\r\n        \"price\": \"92.00\",\r\n        \"brand\": \"Fuelworks\",\r\n        \"category\": \"T-Shirts\",\r\n        \"position\": \"4\"\r\n      }]\r\n    }*/\r\n\r\n    products(obj,cd,cm){\r\n      if(!obj.hasOwnProperty(\"products\") ) return {};\r\n    if(!Array.isArray(obj.products)) throw new Error(\"products must be a object array\");\r\n    let pcd = {\r\n      ..._default.productScopeCD,\r\n      ...cd\r\n    }\r\n\r\n    let pcm = {\r\n      ..._default.productScopeCM,\r\n      ...cm\r\n    }\r\n    let product = {}\r\n    for(let[i,v] of obj.products.entries()){\r\n      if(v.hasOwnProperty('id')){\r\n        product[`pr${i+1}id`] = v['id']\r\n      }\r\n\r\n      if(v.hasOwnProperty('name')){\r\n        product[`pr${i+1}nm`] = v['name']\r\n      }\r\n\r\n      if(v.hasOwnProperty('brand')){\r\n        product[`pr${i+1}br`] = v['brand']\r\n      }\r\n\r\n      if(v.hasOwnProperty('price')){\r\n        product[`pr${i+1}pr`] = v['price']\r\n      }\r\n\r\n      if(v.hasOwnProperty('category')){\r\n        product[`pr${i+1}ca`] = v['category']\r\n      }\r\n\r\n      if(v.hasOwnProperty('variant')){\r\n        product[`pr${i+1}va`] = v['variant']\r\n      }\r\n\r\n      if(v.hasOwnProperty('quantity')){\r\n        product[`pr${i+1}qt`] = v['quantity']\r\n      }\r\n\r\n      if(v.hasOwnProperty('coupon')){\r\n        product[`pr${i+1}cc`] = v['coupon']\r\n      }\r\n\r\n      if(v.hasOwnProperty('position')){\r\n        product[`pr${i+1}ps`] = v['position']\r\n      }\r\n\r\n      if(!isEmptyObj(pcd)){\r\n        for(let k in pcd){\r\n          if(!!k && pcd[k] ){\r\n            product[`pr${i+1}cd${k}`] = pcd[k]\r\n          }\r\n        }\r\n      }\r\n\r\n      if(!isEmptyObj(pcm)){\r\n        for(let k in pcm){\r\n          if(!!k && pcm[k] ){\r\n            product[`pr${i+1}cm${k}`] = pcm[k]\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n    return product\r\n\r\n\r\n    }\r\n\r\n\r\n    checkEEC(obj,cd,cm){\r\n\r\n      if(obj.hasOwnProperty('impresstion')){\r\n        var imp = this.impresstion(obj,cd,cm)\r\n      }\r\n\r\n      if(obj.hasOwnProperty(\"promotions\")){\r\n        var promo = this.promotions(obj,cd,cm)\r\n      }\r\n\r\n      if(obj.hasOwnProperty(\"products\")){\r\n        var  prod = this.products(obj,cd,cm)\r\n      }\r\n\r\n      let eecObj = {\r\n        ...imp,\r\n        ...promo,\r\n        ...prod\r\n      }\r\n      return eecObj\r\n    }\r\n\r\n}\r\n\r\nconst eec = new EEC()\r\nexport default eec\r\n","class Interceptor {\r\n  constructor() {\r\n    this._list = [];\r\n    this.use = this.u\r\n    this.list = this.l\r\n    this.remove = this.clear\r\n  }\r\n\r\n  u(fn) {\r\n    this._list.push(fn);\r\n  }\r\n\r\n  l() {\r\n    return this._list;\r\n  }\r\n  clear(){\r\n    this._list = []\r\n  }\r\n}\r\n\r\n\r\nexport default Interceptor;\r\n","class Store{\r\n  constructor(name){\r\n    this.GAlog = this.GAlog || this.getLog() || []\r\n    if(typeof name != \"string\"){\r\n      throw new Error(\"Logger Name must be string\")\r\n    }\r\n\r\n    this.loggerName = name ||  \"gaLog\"\r\n\r\n  }\r\n  env(){\r\n    if(typeof wx == \"object\"){\r\n\r\n      return \"WECHAT\"\r\n    }\r\n\r\n    if (!!document.URL){\r\n\r\n      return \"WEB\"\r\n    }\r\n  }\r\n\r\n  add(val){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog.push(val)\r\n      this.GAlog = this.GAlog.reverse()\r\n      window.localStorage.setItem(this.loggerName,JSON.stringify(this.GAlog));\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == \"WECHAT\"){\r\n      this.GAlog.push(val)\r\n      this.GAlog = this.GAlog.reverse()\r\n      wx.setStorage({key:this.loggerName,data:this.GAlog})\r\n      return this.getLog()\r\n    }\r\n\r\n  }\r\n\r\n  remove(){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog = []\r\n      window.localStorage.clear()\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == 'WECHAT'){\r\n      this.GAlog = []\r\n      wx.removeStorage({key: this.loggerName})\r\n      return this.getLog()\r\n    }\r\n    //wechat\r\n  }\r\n\r\n  shift(){\r\n    if(this.env() == \"WEB\"){\r\n      this.GAlog.shift()\r\n      this.GAlog = this.GAlog.reverse()\r\n      window.localStorage.setItem(this.loggerName,JSON.stringify(this.GAlog));\r\n      return this.getLog()\r\n    }\r\n\r\n    if(this.env() == \"WECHAT\"){\r\n      this.GAlog.shift()\r\n      this.GAlog = this.GAlog\r\n      wx.setStorage({key:this.loggerName,data:this.GAlog})\r\n      return this.getLog()\r\n    }\r\n\r\n    //wechat\r\n  }\r\n\r\n  size(){\r\n     let galog = this.getLog() || 0\r\n     //console.log(galog)\r\n     return galog.length || 0\r\n    //wechat\r\n  }\r\n\r\n  sortByTime(a,b){\r\n  return new Date(a.time) - new Date(b.time)\r\n}\r\n\r\n   getLog(){\r\n     if(this.env() == \"WECHAT\"){\r\n       var t =wx.getStorageSync(this.loggerName)\r\n     }\r\n     //console.log(t)\r\n\r\n     return t\r\n\r\n     if(this.env() == \"WEB\"){\r\n       try{\r\n         return JSON.parse(window.localStorage.getItem(this.loggerName))\r\n       }catch(e){\r\n         return window.localStorage.getItem(this.loggerName)\r\n       };\r\n     }\r\n   }\r\n\r\n}\r\n\r\nexport default Store\r\n","\r\nconst _default = {\r\n  debug:true,\r\n  proxyURL:'',\r\n  GAdebugURL:\"https://www.google-analytics.com/debug/collect\",\r\n  validateHit:false,\r\n  maxLogLength:10,\r\n  GAURL:\"https://www.google-analytics.com/collect\",\r\n  method: 'POST',\r\n  headers: {\r\n      'X-Request-By': 'XMLHttpRequest',\r\n      'Content-Type':'application/x-www-form-urlencoded'\r\n  },\r\n  rest:'',\r\n  wxRequestTimeout:2000,\r\n  enableLogger:true,\r\n  validateParams:true,\r\n  LoggerName:\"gaLog\",\r\n};\r\n\r\n\r\nexport default _default\r\n","import _default from './config';\r\nimport Interceptor from './Interceptor';\r\nimport Request from './request';\r\nimport schema from './validation'\r\nimport helper from './helper'\r\nimport Store from './common'\r\nimport eec from './EecUtils.js'\r\nimport wechatUtils from './wechatUtils'\r\nimport validation from './validation.js'\r\nclass GA{\r\n  constructor(options = {} ){\r\n    this.weUtils = new wechatUtils()\r\n    this.default = this.create(options)\r\n   this.interceptors = {\r\n    request: new Interceptor(),\r\n  response: new Interceptor(),\r\n}\r\n\r\n    this.validation = new validation()\r\n  }\r\n\r\n   getLog(){\r\n     let log = new Store();\r\n\r\n     return log.getLog();\r\n   }\r\n\r\n  get(...args){\r\n   let op = this._preprocessArgs(\"GET\",args)\r\n   if(!op){\r\n\r\n   }\r\n   return this.request(op)\r\n  }\r\n\r\n  post(...args) {\r\n    let op = this._preprocessArgs('POST', args);\r\n    if (!op) {\r\n      return op\r\n    }\r\n    return this.request(op)\r\n  }\r\n\r\n\r\n  create(options = {}){\r\n\r\n    if(JSON.stringify(options) === '{}') throw new Error(\"Error : config could not empty!\")\r\n    let config = {\r\n    ...JSON.parse(JSON.stringify(_default)),\r\n    ...options\r\n  };\r\n  config.url = this.getEnvURL(config)\r\n  if(typeof wx == \"object\"){\r\n    config.data.ua = this.weUtils.generateUA()\r\n  }\r\n  helper.merge(config.data,config.defaultGaData)\r\n\r\n    return config;\r\n  }\r\n\r\n  _preprocessArgs(method, ...args) {\r\n\r\n\r\n\r\n  let options;\r\n  let arg = args.flat()\r\n  if(arg.length == 0){\r\n    options ={\r\n      method,\r\n      url:this.default.url,\r\n    }\r\n  }\r\n  if(typeof arg[0] == \"object\"){\r\n    options = {\r\n      method,\r\n      url:this.default.url,\r\n    data:arg[0]}\r\n  }\r\n\r\n  return options;\r\n}\r\n\r\n\r\ngetEnvURL(config){\r\n  if(config.debug && config.validateHit){\r\n    return config.GAdebugURL\r\n  }\r\n  if(config.debug){\r\n    return config.GAURL\r\n  }\r\n  if(!config.debug){\r\n    return config.proxyURL\r\n  }\r\n}\r\n\r\nrequest(options){\r\n\r\n  const optionCopy = helper.deepClone(options)\r\n\r\n  options.hitID = helper.generateUUID()\r\n  // 合并\r\n  let cog = options\r\n  const mh = optionCopy.method\r\n  const opData = optionCopy.data\r\n\r\n  cog= helper.merge(cog,this.default)\r\n  //helper.merge(cog,options)\r\n  cog.method = mh\r\n  cog.data = helper.merge(cog.data,opData)\r\n\r\n  var cc = helper.deepClone(cog)\r\n  if(cc.data.hasOwnProperty(\"productScopeCD\")){\r\n    var cogCd = cc.data.productScopeCD || {}\r\n    delete cc.data.productScopeCD\r\n  }\r\n\r\n    if(cog.data.hasOwnProperty(\"productScopeCM\")){\r\n      var cogCm = cc.data.productScopeCM || {}\r\n      delete cc.data.productScopeCM\r\n    }\r\n  let eecobj = eec.checkEEC(cc.data,cogCd,cogCm)\r\n\r\n  cc.data = Object.assign(cc.data,eecobj)\r\n  if(cc.data.hasOwnProperty(\"products\")){\r\n    delete cc.data.products\r\n  }\r\n\r\n  if(cc.data.hasOwnProperty(\"promotions\")){\r\n    delete cc.data.promotions\r\n  }\r\n\r\n  if(cc.data.hasOwnProperty(\"impresstion\")){\r\n    delete cc.data.impresstion\r\n  }\r\n   const res = new Request(cc)\r\n   if(cc.validateParams){\r\n     this.validation.use(cc.data)\r\n   }\r\n  let {transferRequest} = cc\r\n\r\n  if(transferRequest) cc = transferRequest(cc)\r\n    //delete cog.transferRequest\r\n    //delete this.default.transferRequest\r\n    //transferRequest = (cog) => cog;\r\n\r\n  let list = this.interceptors.request.list();\r\n  list.forEach(fn => {\r\n  cc = fn(cc);\r\n});\r\n\r\n  return res.send(cc)\r\n}\r\n\r\n\r\n}\r\n\r\nexport default GA\r\n","class helpers {\r\n  constructor() {\r\n  }\r\n\r\n\r\n\r\n  objectToParams(obj){\r\nlet queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\nreturn queryString\r\n  }\r\n\r\n  Error(msg){\r\n    if(msg){\r\n      throw new Error(msg);\r\n    }\r\n  }\r\n\r\n  merge(dest, src) {\r\n  if(JSON.stringify(src) === '{}') return dest\r\n  for (let name in src) {\r\n    if (typeof src[name] == 'object') {\r\n      if (!dest[name]) {\r\n        dest[name] = {};\r\n      }\r\n\r\n      this.merge(dest[name], src[name]);\r\n    } else {\r\n      dest[name] = src[name];\r\n    }\r\n  }\r\n  return dest\r\n}\r\n\r\nformatTime(date){\r\n  const year = date.getFullYear()\r\n  const month = date.getMonth() + 1\r\n  const day = date.getDate()\r\n  const hour = date.getHours()\r\n  const minute = date.getMinutes()\r\n  const second = date.getSeconds()\r\n\r\n  return [year, month, day].map(this.formatNumber).join('/') + ' ' + [hour, minute, second].map(this.formatNumber).join(':')\r\n}\r\n\r\nformatNumber(n){\r\n  n = n.toString()\r\n  return n[1] ? n : '0' + n\r\n}\r\n\r\ngenerateUUID(){\r\n    var d = new Date().getTime();\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = (d + Math.random()*16)%16 | 0;\r\n        d = Math.floor(d/16);\r\n        return (c=='x' ? r : (r&0x7|0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n}\r\n\r\n  deepClone(obj) {\r\n    var copy;\r\n\r\n    // Handle number, boolean, string, null and undefined\r\n    if (null == obj || \"object\" != typeof obj) return obj;\r\n\r\n    // Handle Date\r\n    if (obj instanceof Date) {\r\n        copy = new Date();\r\n        copy.setTime(obj.getTime());\r\n        return copy;\r\n    }\r\n\r\n    // Handle Array\r\n    if (obj instanceof Array) {\r\n        copy = [];\r\n        for (var i = 0, len = obj.length; i < len; i++) {\r\n            copy[i] = this.deepClone(obj[i]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    // Handle Object\r\n    if (obj instanceof Object) {\r\n        copy = {};\r\n        for (var attr in obj) {\r\n            if (obj.hasOwnProperty(attr)) copy[attr] = this.deepClone(obj[attr]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\");\r\n}\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst helper = new helpers()\r\n\r\n\r\nexport default helper;\r\n","import GA from './ga'\r\n\r\n/*\r\nlet UA=()=> \"UA-71412438-1\"\r\n\r\nlet config = {\r\n  transferRequest(config){\r\n    console.log('do something before sending the hit')\r\n    //config.data.dp = \"/test\"\r\n    return config\r\n  },\r\n  data:{  //common request payload\r\n    v:1,\r\n    cid:1234556,\r\n    tid:UA(),\r\n    dp:\"placeholder\",\r\n    ds:\"wechat\",\r\n    cd1:\"custom dimension1\",\r\n    pal:'search result'\r\n  },\r\n  LoggerName:\"we\",\r\n  transferResponse(res){\r\n    console.log(\"do something for the response\")\r\n    return res\r\n  },\r\n  validateHit:false, // will send to the vvalidation endpoint(optional)\r\n  //proxyURL:\"YOUR_PROXY_URL\"\r\n  onSuccess(config){\r\n    console.log(\"success\") //your custom success function (options)\r\n  },\r\n  onError(config){\r\n    console.log(\"Error\")\r\n  },\r\n  //maxLogLength:10,\r\n  enableLogger:true,\r\n}\r\nvar t = [{\r\n     inputRegex:\"/wechat\",\r\n     outputName:\"/map\"\r\n}]\r\nlet G = new GA(config)\r\n//window.GA= GA\r\nG.interceptors.request.use(function(config) { // push a handler function before send request\r\n  config.data.dp  = G.weUtils.map(t, config.data.dp) // process data before send to GA\r\n  return config;\r\n});\r\n\r\nG.post({\r\n  dp:\"/wechat\",\r\n  t:'event',\r\n  ec:\"test\",\r\n  ea:\"wechatSDK\",\r\n  pa:\"detail\",\r\n  \"products\": [\r\n    {\r\n      \"id\": \"bc823\",\r\n      \"name\": \"Fuelworks T-Shirt\",\r\n      \"price\": \"92.00\",\r\n      \"brand\": \"Fuelworks\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": \"4\"\r\n    },\r\n\r\n    {\r\n      \"id\": \"bc843\",\r\n      \"name\": \" T-Shirt\",\r\n      \"price\": \"92.00\",\r\n      \"brand\": \"Fuelworks\",\r\n      \"category\": \"T-Shirts\",\r\n      \"position\": \"4\"\r\n    },\r\n  ],\r\n    \"promotions\": [{\r\n  \"id\": \"bts\",\r\n  \"name\": \"Back To School\",\r\n  \"creative\": \"HOME banner\",\r\n  \"position\": \"right sidebar\"\r\n}],\r\nproductScopeCD:{\r\n  '3':'cd3',\r\n  '6' : \"cd6\"\r\n},\r\n\r\nproductScopeCM:{\r\n  '4':100,\r\n}\r\n\r\n})\r\n*/\r\n\r\n\r\nexport default GA\r\n","import Store from './common'\r\nimport helper from './helper'\r\n\r\nclass Logger {\r\n  constructor(config){\r\n    this.log = new Store(config.LoggerName)\r\n    this.maxLogLength = config.maxLogLength\r\n    this.enableLogger = config.enableLogger\r\n    this.init()\r\n  }\r\n\r\n  init(){\r\n\r\n    if(this.size() == 0){\r\n\r\n\r\n    this.log.add(\r\n      {\r\n         time:helper.formatTime(new Date),\r\n         Launch:\"Logger Init\"\r\n      }\r\n    )\r\n  }\r\n  }\r\n\r\n    enqueue(val) {\r\n      if(!this.enableLogger){\r\n        console.log(\"debug mode paused, won't record any log right now\")\r\n        return false\r\n      }\r\n\r\n      if(this.size() < this.maxLogLength){\r\n        this.log.add({\r\n          time : helper.formatTime(new Date),\r\n          ...val,\r\n        });\r\n      }\r\n      if(this.size() >= this.maxLogLength){\r\n        this.log.shift()\r\n        this.log.add({\r\n          time:helper.formatTime(new Date),\r\n          ...val})\r\n      }\r\n      console.log(this.log)\r\n      return this.log\r\n    }\r\n\r\n    dequeue() {\r\n        let de = this.log.shift();\r\n        return de\r\n    }\r\n\r\n\r\n    isEmpty() {\r\n        return this.log.length === 0;\r\n    }\r\n\r\n    clear(){\r\n      this.log.remove()\r\n      return this.log\r\n    }\r\n\r\n    size(){\r\n      return this.log.size()\r\n    }\r\n    getlog(){\r\n      return this.log\r\n    }\r\n}\r\n\r\n\r\nexport default Logger\r\n","import Logger from './log'\r\nimport _default from './config'\r\n\r\nclass Request {\r\n  constructor(option){\r\n     this.Log = new Logger(option)\r\n  }\r\n\r\n\r\n  webRequest(option){\r\n    //let {url,method,data} = option\r\n    // object to params?\r\n      let that = this\r\n      if (String(option) !== '[object Object]') return undefined\r\n      option.method = option.method ? option.method.toUpperCase() : 'POST'\r\n      option.data = option.data || {}\r\n      var formData = []\r\n      for (var key in option.data) {\r\n        formData.push(''.concat(key, '=', option.data[key]))\r\n      }\r\n      option.data = formData.join('&')\r\n\r\n      if (option.method === 'GET') {\r\n        option.getUrl= option.url + \"?\" + option.data\r\n      }\r\n      let {transferResponse} = option\r\n\r\n      //console.log(option)\r\n      var xhr = new XMLHttpRequest()\r\n      xhr.responseType = option.responseType || 'json'\r\n      xhr.onreadystatechange = function () {\r\n        if (xhr.readyState === 4) {\r\n          if (xhr.status === 200) {\r\n            if(transferResponse)\r\n            {\r\n              //console.log(xhr.response)\r\n              that.Log.enqueue({\r\n\t\t\t\t         type:\"success\",\r\n                url:option.url?option.url:option.getUrl,\r\n                data:this.removeEmptyObjKey(options.data),\r\n                res:option.validateHit ? transferResponse(xhr.response): xhr.status,\r\n                hitID:option.hitID,\r\n                //transferResponse(xhr.response)\r\n              })\r\n              if(!!option.onSuccess){\r\n                option.onSuccess(option)\r\n              }\r\n\r\n                //delete option.transferRespons\r\n                //transferResponse = (res)=> res\r\n\r\n\r\n            }else{\r\n              that.Log.enqueue({\r\n\t\t\t        \ttype:\"success\",\r\n                url:option.url?option.url:option.getUrl,\r\n                data:this.removeEmptyObjKey(options.data),\r\n                res:option.validateHit ? xhr.response : xhr.status,\r\n                hitID:option.hitID,\r\n              })\r\n              if(!!option.onSuccess){\r\n                option.onSuccess(option)\r\n              }\r\n\r\n            }\r\n          } else {\r\n              //this.fail()\r\n              that.Log.enqueue({\r\n                type:\"error\",\r\n                data:this.removeEmptyObjKey(options.data),\r\n                url:option.url?option.url:option.getUrl,\r\n                res:option.validateHit ? xhr.response : \"Error\",\r\n                hitID:option.hitID,\r\n                //data:option.data,\r\n                //transferResponse(xhr.response)\r\n              })\r\n              if(!!option.onError){\r\n              option.onError(option)\r\n              }\r\n\r\n              return \"Request Fail\"\r\n\r\n          }\r\n        }\r\n      }\r\n      if(option.method == \"GET\"){\r\n        xhr.open(option.method, option.getUrl, true)\r\n        xhr.send()\r\n      }\r\n\r\n      if (option.method === 'POST') {\r\n        xhr.open(option.method, option.url, true)\r\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\r\n        xhr.send(option.data)\r\n      }\r\n      //console.loh(t)\r\n    }\r\n\r\n\r\nweRequest(options){\r\n  let that = this\r\n   let {transferResponse} = options\r\n   wx.request({\r\n     url:options.url,\r\n     method:options.method,\r\n     data:this.removeEmptyObjKey(options.data),\r\n     header:options.headers,\r\n     timeout:options.wxRequestTimeout,\r\n     success(res){\r\n       //console.log(res)\r\n       if(transferResponse){\r\n       that.Log.enqueue({\r\n\t\t  type:\"success\",\r\n         url:options.url?options.url:options.getUrl,\r\n         data:this.removeEmptyObjKey(options.data),\r\n         res:options.transferResponse(res),\r\n         hitID:options.hitID,\r\n       })\r\n     }else{\r\n      that.Log.enqueue({\r\n\t\t  type:\"success\",\r\n         url:options.url?options.url:options.getUrl,\r\n         data:this.removeEmptyObjKey(options.data),\r\n         res:res,\r\n         hitID:options.hitID,\r\n       })\r\n     }\r\n       if(!!options.onSuccess){\r\n         options.onSuccess(options)\r\n       }\r\n     },\r\n     fail(res){\r\n       //console.log(res)\r\n       if(transferResponse){\r\n       that.Log.enqueue({\r\n\t\t   type:\"error\",\r\n         url:options.url?options.url:options.getUrl,\r\n         data:this.removeEmptyObjKey(options.data),\r\n         res:options.transferResponse(res),\r\n         hitID:options.hitID,\r\n       })\r\n     }else{\r\n       that.Log.enqueue({\r\n         url:options.url?options.url:options.getUrl,\r\n         data:this.removeEmptyObjKey(options.data),\r\n         res:res,\r\n         hitID:options.hitID,\r\n       })\r\n     }\r\n       if(!!options.onError){\r\n         options.onError(options)\r\n       }\r\n\r\n     }\r\n   })\r\n}\r\nisonWechat(){\r\n  return typeof wx == 'object'? true : false\r\n}\r\n\r\nremoveEmptyObjKey(obj){\r\n    Object.keys(obj).forEach(key => {\r\n     if (obj[key] === undefined || !obj[key]) {\r\n      delete obj[key];\r\n     }\r\n    });\r\n     return obj\r\n   }\r\n\r\nsend(options){\r\n\r\n  if(this.isonWechat()){\r\n    return this.weRequest(options)\r\n  }\r\n  return this.webRequest(options)\r\n\r\n}\r\n\r\n}\r\n\r\nexport default Request\r\n","\r\nclass validation{\r\n  constructor(){\r\n   this.v = this.init()\r\n   this.requireList = ['tid','v']\r\n   //this.anyList = [['dp','dl','dh']]\r\n   this.regexL = {\r\n     \"tid\":\"UA-[0-9]*-[0-9]*\"\r\n   }\r\n\r\n  }\r\n\r\n  add(fn){\r\n    this.v.push(fn)\r\n  }\r\n\r\n  use(obj){\r\n    var that = this\r\n    for(let fn of this.v){\r\n      obj = fn.call(that, obj)\r\n    }\r\n    return obj\r\n  }\r\n\r\n  checkRequire(obj){\r\n    var that = this\r\n    for(let x of this.requireList){\r\n        if(!obj.hasOwnProperty(x)){\r\n          throw new Error(`${x} is required`)\r\n        }\r\n    }\r\n    return obj\r\n\r\n  }\r\n\r\n\r\n  addRequirelist(params){\r\n     return this.requireList.push(params)\r\n  }\r\n\r\n  /*addAnyList(params){\r\n    return this.anyList.push(params)\r\n  }*/\r\n\r\n  addRegexList(obj){\r\n    this.regexL =  {\r\n      ...this.regexL,\r\n      ...obj\r\n    }\r\n    return this.regexL\r\n  }\r\n\r\n\r\n  regex(obj){\r\n    let that = this\r\n    for(let x in this.regexL){\r\n      if(!obj.hasOwnProperty(x)){\r\n        throw new Error(`No ${that.x} on object`)\r\n      }\r\n      let re = new RegExp(this.regexL[x],'ig')\r\n      if(this.isString(x)){\r\n      if(!String(obj[x]).match(re)){\r\n        throw new Error(`${x} do not match ${that.regexL[x]}`)\r\n      }\r\n    }\r\n  }\r\n    return obj\r\n\r\n  }\r\n\r\n\r\n  length(obj){\r\n\r\n    function objectToParams(obj){\r\n  let queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\n  return queryString\r\n    }\r\n\r\n    let objString = this.objectToParams(obj)\r\n    if(objString.length > 8012){\r\n      throw new Error(\"Hit was too long, hit length must under 8012\")\r\n    }\r\n    return obj\r\n  }\r\n\r\n  /*anyone(obj){\r\n    var that = this\r\n    for(let l of this.anyList){\r\n      if(Object.keys(obj).filter((val)=>l.includes(val)).length == 0){\r\n        throw new Error(`must contains anyone of ${JSON.stringify(l)}`)\r\n      }\r\n    }\r\n\r\n    return obj\r\n  }*/\r\n\r\n  pa(obj,rule,target){\r\n\r\n  }\r\n\r\n  checkValidateParamater(obj){\r\n\r\n    for(let x in obj){\r\n      //if(typeof x == 'object'{continue}\r\n      if(this.isString(x)){\r\n      if(String(obj[x]).match(/@?&=/i)){\r\n        throw new Error(\"Can not contains '@?&=' in the params\");\r\n      }\r\n    }\r\n  }\r\n    return obj\r\n  }\r\n\r\n  objectToParams(obj){\r\nlet queryString = Object.keys(obj).map(key => key + '=' + obj[key]).join('&');\r\nreturn queryString\r\n  }\r\n\r\n  init(obj){\r\n    let t = []\r\n    t.push(this.checkRequire)\r\n    t.push(this.regex)\r\n    //t.push(this.anyone)\r\n    t.push(this.checkValidateParamater)\r\n    t.push(this.length)\r\n    return t\r\n  }\r\n\r\n  resetTodefault(){\r\n    this.requireList = ['tid','v']\r\n    //this.anyList = [['dp','dl','dh']]\r\n    this.regexL = {\r\n      \"tid\":\"UA-[0-9]*-[0-9]*\"\r\n    }\r\n  }\r\n\r\n  isString(s){\r\n    if (typeof s === 'string' || s instanceof String){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n\r\n}\r\n\r\n//check hit payload lengtg\r\n//check required paramters\r\n//check if there is any unvalid paramters ? &\r\n//check if mobile or web\r\n//check EEC object\r\n//check pa for EEC\r\n\r\n\r\nexport default validation\r\n","\r\nconst SceneMapping = {\r\n    1001: \"发现栏小程序主入口\",\r\n    1005: \"顶部搜索框的搜索结果页\",\r\n    1006: \"发现栏小程序主入口搜索框的搜索结果页\",\r\n    1007: \"单人聊天会话中的小程序消息卡片\",\r\n    1008: \"群聊会话中的小程序消息卡片\",\r\n    1011: \"扫描二维码\",\r\n    1012: \"长按图片识别二维码\",\r\n    1013: \"手机相册选取二维码\",\r\n    1014: \"小程序模版消息\",\r\n    1017: \"前往体验版的入口页\",\r\n    1019: \"微信钱包\",\r\n    1020: \"公众号profile页相关小程序列表\",\r\n    1022: \"聊天顶部置顶小程序入口\",\r\n    1023: \"安卓系统桌面图标\",\r\n    1024: \"小程序profile页\",\r\n    1025: \"扫描一维码\",\r\n    1026: \"附近小程序列表\",\r\n    1027: \"顶部搜索框搜索结果页“使用过的小程序”列表\",\r\n    1028: \"我的卡包\",\r\n    1029: \"卡券详情页\",\r\n    1030: \"自动化测试下打开小程序\",\r\n    1031: \"长按图片识别一维码\",\r\n    1032: \"手机相册选取一维码\",\r\n    1034: \"微信支付完成页\",\r\n    1035: \"公众号自定义菜单\",\r\n    1036: \"App 分享消息卡片\",\r\n    1037: \"小程序打开小程序\",\r\n    1038: \"从另一个小程序返回\",\r\n    1039: \"摇电视\",\r\n    1042: \"添加好友搜索框的搜索结果页\",\r\n    1043: \"公众号模板消息\",\r\n    1044: \"带shareTicket的小程序消息卡片\",\r\n    1045: \"朋友圈广告\",\r\n    1046: \"朋友圈广告详情页\",\r\n    1047: \"扫描小程序码\",\r\n    1048: \"长按图片识别小程序码\",\r\n    1049: \"手机相册选取小程序码\",\r\n    1052: \"卡券的适用门店列表\",\r\n    1053: \"搜一搜的结果页\",\r\n    1054: \"顶部搜索框小程序快捷入口\",\r\n    1056: \"音乐播放器菜单\",\r\n    1057: \"钱包中的银行卡详情页\",\r\n    1058: \"公众号文章\",\r\n    1059: \"体验版小程序绑定邀请页\",\r\n    1064: \"微信连Wifi状态栏\",\r\n    1067: \"公众号文章广告\",\r\n    1068: \"附近小程序列表广告\",\r\n    1069: \"移动应用\",\r\n    1071: \"钱包中的银行卡列表页\",\r\n    1072: \"二维码收款页面\",\r\n    1073: \"客服消息列表下发的小程序消息卡片\",\r\n    1074: \"公众号会话下发的小程序消息卡片\",\r\n    1077: \"摇周边\",\r\n    1078: \"连Wi-Fi成功页\",\r\n    1079: \"微信游戏中心\",\r\n    1081: \"客服消息下发的文字链\",\r\n    1082: \"公众号会话下发的文字链\",\r\n    1084: \"朋友圈广告原生页\",\r\n    1089: \"微信聊天主界面下拉\",\r\n    1090: \"长按小程序右上角菜单唤出最近使用历史\",\r\n    1091: \"公众号文章商品卡片\",\r\n    1092: \"城市服务入口\",\r\n    1095: \"小程序广告组件\",\r\n    1096: \"聊天记录\",\r\n    1097: \"微信支付签约页\",\r\n    1099: \"页面内嵌插件\",\r\n    1102: \"公众号 profile 页服务预览\",\r\n    default:\"unknow scene value\"\r\n  };\r\n\r\n\r\n  class Mapping {\r\n      constructor() {\r\n          this.currentMap = {}\r\n          this.currentOutput = \"\"\r\n      }\r\n\r\n      getMap() {\r\n          return this.map\r\n      }\r\n      Mapping(map,input){\r\n        const current = map.find(item => input.match(new RegExp(item.inputRegex,\"i\"))) || {}\r\n        this.currentMap = current\r\n        this.currentOutput =  current.outputName\r\n        return current.outputName\r\n      }\r\n\r\n      getOutput() {\r\n          return this.currentOutput\r\n      }\r\n  }\r\n\r\n  var m = new Mapping()\r\n\r\n\r\nclass wechatUtils{\r\n  construct(sMapping){\r\n    this.onWechat = this.isOnwechat()\r\n    this.SMapping = sMapping || SceneMapping\r\n  }\r\n\r\n  map(table,field){\r\n    return m.Mapping(table,field)\r\n  }\r\n\r\n  isOnwechat(){\r\n    if(typeof wx == 'object'){\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  mappingSceneToCN(num){\r\n    if(this.onWechat){\r\n      return this.SMapping[num] || this.SMapping['default']\r\n    }\r\n    return ''\r\n  }\r\n\r\n  generateUA(){\r\n    if(typeof wx == 'object'){\r\n    let res = wx.getSystemInfoSync();\r\n    let isAndroid = res.system.toLowerCase().indexOf('android') > -1;\r\n    let iresPad = !isAndroid && res.model.toLowerCase().indexOf('iphone') == -1;\r\n      if (isAndroid) {\r\n        return \"Mozilla/5.0 (Linux; U; \" + res.system + \"; \" + res.model + \" Build/000000) AppleWebKit/537.36 (KHTML, like Gecko)Verreson/4.0 Chrome/49.0.0.0 Mobile Safari/537.36 MicroMessenger/\" + res.version;\r\n      } else if (!iresPad) {\r\n\r\n    let v = res.system.replace(/^.*?([0-9.]+).*?$/, function (x, y) { return y; }).replace(/\\./g, '_');\r\n      return \"Mozilla/5.0 (iPhone; CPU iPhone OS \" + v + \" like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92 MicroMessenger/\" + res.version;\r\n    } else {\r\n      let v = res.system.replace(/^.*?([0-9.]+).*?$/, function (x, y) { return y; }).replace(/\\./g, '_');\r\n      return \"Mozilla/5.0 (iPad; CPU OS \" + v + \" like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/10A406 MicroMessenger/\" + res.version;\r\n        }\r\n    }\r\n    if(typeof navigator == 'object'){\r\n      return navigator.userAgent\r\n    }\r\n    return ''\r\n  }\r\n\r\n  getCurrentPageUrlWithArgs() {\r\n  var pages = getCurrentPages()\r\n  var currentPage = pages[pages.length - 1]\r\n  var url = currentPage.route\r\n  var options = currentPage.options\r\n\r\n  //拼接url的参数\r\n  var urlWithArgs = url + '?'\r\n  for (var key in options) {\r\n    var value = options[key]\r\n    urlWithArgs += key + '=' + value + '&'\r\n  }\r\n  urlWithArgs = urlWithArgs.substring(0, urlWithArgs.length - 1)\r\n\r\n  return urlWithArgs\r\n}\r\n\r\n getCurrentPageUrl() {\r\n  var pages = getCurrentPages()\r\n  var currentPage = pages[pages.length - 1]\r\n  var url = currentPage.route\r\n  return url\r\n}\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default wechatUtils\r\n"],"sourceRoot":""}